(this.webpackJsonpwhosi=this.webpackJsonpwhosi||[]).push([[0],{25:function(e,t,a){"use strict";a.d(t,"g",(function(){return _})),a.d(t,"h",(function(){return n})),a.d(t,"d",(function(){return c})),a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return s})),a.d(t,"f",(function(){return l})),a.d(t,"e",(function(){return i})),a.d(t,"c",(function(){return d}));var r=a(19);const _=r.v,n=r.k,c=r.g,o=[[r.p,r.h,r.r],[r.z,r.k,r.g],[r.w,r.d,r.A,r.v]],s=8,l=11,i=[r.z,r.t,r.e,r.q,r.r,r.s,r.A,r.k,r.b,r.f,r.y,r.j,r.h,r.p,r.d,r.w,r.n,r.l,r.B,r.a,r.i,r.m,r.x,r.u,r.o,r.v,r.g,r.c],d=(e,t)=>{if("string"===typeof e)return e;return e[Object.keys(e)[0].replace(/\d/,"")+t]}},30:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"l",(function(){return getUrl})),__webpack_require__.d(__webpack_exports__,"a",(function(){return configParser})),__webpack_require__.d(__webpack_exports__,"b",(function(){return filterByCountryGenerator})),__webpack_require__.d(__webpack_exports__,"g",(function(){return getElements})),__webpack_require__.d(__webpack_exports__,"k",(function(){return getSetting})),__webpack_require__.d(__webpack_exports__,"h",(function(){return getField})),__webpack_require__.d(__webpack_exports__,"i",(function(){return getFieldBoolean})),__webpack_require__.d(__webpack_exports__,"j",(function(){return getFormula})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getBounds})),__webpack_require__.d(__webpack_exports__,"e",(function(){return getColors})),__webpack_require__.d(__webpack_exports__,"m",(function(){return transformYearRange})),__webpack_require__.d(__webpack_exports__,"f",(function(){return getDataPoint})),__webpack_require__.d(__webpack_exports__,"d",(function(){return getCalculatedDataPoint}));var lodash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5),lodash__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__),_consts_colors__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(25),_consts_data__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(4),_display__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(43);const SPECIAL_FILTERS_MAP={_NONE_:lodash__WEBPACK_IMPORTED_MODULE_0___default.a.negate(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.identity),_SOMETHING_:lodash__WEBPACK_IMPORTED_MODULE_0___default.a.identity,_ANY_:lodash__WEBPACK_IMPORTED_MODULE_0___default.a.stubTrue},defaultCompFn=(e,t)=>e.toLowerCase()===t.toLowerCase(),getUrl=e=>"https://docs.google.com/spreadsheets/d/e/2PACX-1vSAEOXOt5aHDcb35lpCsSO5AvHTZPplXHrHGaIXTJjCtW_B96D0MOItWZLGv1j4lagTxnuVClms6M0X/pub?gid=".concat(e,"&single=true&output=csv"),configParser=e=>{if(e[_consts_data__WEBPACK_IMPORTED_MODULE_2__.d.chartId])return delete e[""],lodash__WEBPACK_IMPORTED_MODULE_0___default.a.each(e,((t,a)=>{""===t&&delete e[a]})),e},filterByCountryGenerator=e=>t=>t[_consts_data__WEBPACK_IMPORTED_MODULE_2__.e.country_iso_code]===e?t:null,getElements=e=>Object.keys(e).filter((e=>e!==_consts_data__WEBPACK_IMPORTED_MODULE_2__.j.all&&!e.startsWith(_consts_data__WEBPACK_IMPORTED_MODULE_2__.j._key_))),getSetting=e=>{let{element:t=_consts_data__WEBPACK_IMPORTED_MODULE_2__.j.all,chartConfigsMap:a,field:r,chartId:_=_consts_data__WEBPACK_IMPORTED_MODULE_2__.j.all}=e;return lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(a,[_,t,0,r])||lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(a,[_,_consts_data__WEBPACK_IMPORTED_MODULE_2__.j.all,0,r])||lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(a,[_consts_data__WEBPACK_IMPORTED_MODULE_2__.j.all,0,r])},getField=e=>{let{element:t=_consts_data__WEBPACK_IMPORTED_MODULE_2__.j.all,chartConfig:a,field:r}=e;return lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(a,[t,0,r])},getFieldBoolean=e=>{let{element:t=_consts_data__WEBPACK_IMPORTED_MODULE_2__.j.all,chartConfig:a,field:r}=e;return!!getField({element:t,chartConfig:a,field:r})},getFormula=e=>{let{element:t,chartConfig:a}=e;return getField({element:t,chartConfig:a,field:_consts_data__WEBPACK_IMPORTED_MODULE_2__.d.formula})},getBounds=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{[_consts_data__WEBPACK_IMPORTED_MODULE_2__.e.value_lower]:t,[_consts_data__WEBPACK_IMPORTED_MODULE_2__.e.value_upper]:a}=e;if(parseFloat(t)&&parseFloat(a))return[parseFloat(t),parseFloat(a)]},getColors=e=>{let{chartSettings:t,chartConfig:a,chartElements:r}=e,_=parseInt(Math.abs(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(t,_consts_data__WEBPACK_IMPORTED_MODULE_2__.d.colorOverride)));_=((_||1)-1)%_consts_colors__WEBPACK_IMPORTED_MODULE_1__.a.length;const n=_consts_colors__WEBPACK_IMPORTED_MODULE_1__.a[_],c=r.map(((e,t)=>getField({chartConfig:a,element:e,field:_consts_data__WEBPACK_IMPORTED_MODULE_2__.d.colorOverride})||n[t%n.length]));return"nested"===lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(t,_consts_data__WEBPACK_IMPORTED_MODULE_2__.d.chartType)&&c.push(n[r.length%n.length]),c},transformYearRange=e=>{const t=/\[(\d+)-(\d+)\]/.exec(e);if(!t||!t.length>1)return[];const a=parseInt(t[1]),r=parseInt(t[2]);return lodash__WEBPACK_IMPORTED_MODULE_0___default.a.range(a,r+1).map(String)},getFilter=e=>{let{chartId:t,element:a,year:r=null,selectedIso:_,chartConfigsMap:n}=e;const c=lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(n,"all[0]",{}),o=lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(n,[t,_consts_data__WEBPACK_IMPORTED_MODULE_2__.j.all,0],{}),[s,...l]=lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(n,[t,a],[{}]),i={...c,...o,...s,selectedIso:_};return r&&(i.year=r),i},getRow=e=>{let{filter:t,chartSourceData:a}=e;const r=lodash__WEBPACK_IMPORTED_MODULE_0___default.a.filter(a,(e=>lodash__WEBPACK_IMPORTED_MODULE_0___default.a.every(t,((t,a)=>{if(!_consts_data__WEBPACK_IMPORTED_MODULE_2__.e[a])return!0;const r=e[a]||"";return!!(SPECIAL_FILTERS_MAP[t]||defaultCompFn)(r,t)}))));return lodash__WEBPACK_IMPORTED_MODULE_0___default.a.maxBy(r,(e=>Number(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(e,_consts_data__WEBPACK_IMPORTED_MODULE_2__.e.year,0))+Number(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(e,_consts_data__WEBPACK_IMPORTED_MODULE_2__.e.sourceYear,0))/1e4))},getDataPoint=e=>{let{chartId:t,element:a,year:r=null,selectedIso:_,chartConfigsMap:n,chartSourceData:c}=e;const o=getFilter({chartId:t,element:a,year:r,selectedIso:_,chartConfigsMap:n,chartSourceData:c}),s=getRow({filter:o,chartSourceData:c}),l=lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(o,_consts_data__WEBPACK_IMPORTED_MODULE_2__.d.valueField,_consts_data__WEBPACK_IMPORTED_MODULE_2__.e.value);let i=lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(s,l,null);if(!s||!i)return{};const d=getField({element:a,chartConfig:n[t],field:_consts_data__WEBPACK_IMPORTED_MODULE_2__.d.displayName});return d&&lodash__WEBPACK_IMPORTED_MODULE_0___default.a.set(s,_consts_data__WEBPACK_IMPORTED_MODULE_2__.f.DISPLAY_NAME,d),l&&l!==_consts_data__WEBPACK_IMPORTED_MODULE_2__.e.value?{row:s,value:i}:capAndFormat({row:s,value:i,chartConfigsMap:n,chartId:t,element:a})},capAndFormat=e=>{let{row:t,value:a,chartConfigsMap:r,chartId:_,element:n}=e,c=a;if(getFieldBoolean({chartConfig:r[_],field:_consts_data__WEBPACK_IMPORTED_MODULE_2__.d.percentage})){const e={cap:getSetting({chartConfigsMap:r,chartId:_,element:n,field:_consts_data__WEBPACK_IMPORTED_MODULE_2__.d.capPercentage}),decimals:getSetting({chartConfigsMap:r,chartId:_,element:n,field:_consts_data__WEBPACK_IMPORTED_MODULE_2__.d.percentageDecimals})};c=Object(_display__WEBPACK_IMPORTED_MODULE_3__.c)(a,e),a=Object(_display__WEBPACK_IMPORTED_MODULE_3__.a)(a,e),_display__WEBPACK_IMPORTED_MODULE_3__.a&&lodash__WEBPACK_IMPORTED_MODULE_0___default.a.set(t,_consts_data__WEBPACK_IMPORTED_MODULE_2__.e.value,a),[_consts_data__WEBPACK_IMPORTED_MODULE_2__.e.value_lower,_consts_data__WEBPACK_IMPORTED_MODULE_2__.e.value_upper].forEach((a=>{const r=lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(t,a);r&&lodash__WEBPACK_IMPORTED_MODULE_0___default.a.set(t,"DISPLAY_".concat(a.toUpperCase()),Object(_display__WEBPACK_IMPORTED_MODULE_3__.c)(r,e));const _=r&&Object(_display__WEBPACK_IMPORTED_MODULE_3__.a)(r,e);_&&lodash__WEBPACK_IMPORTED_MODULE_0___default.a.set(t,a,_)}))}else{const e=!!getSetting({chartConfigsMap:r,chartId:_,element:n,field:_consts_data__WEBPACK_IMPORTED_MODULE_2__.d.coarseIntegerFormatting});c=Object(_display__WEBPACK_IMPORTED_MODULE_3__.b)(a,{coarseFormatting:e}),[_consts_data__WEBPACK_IMPORTED_MODULE_2__.e.value_lower,_consts_data__WEBPACK_IMPORTED_MODULE_2__.e.value_upper].forEach((e=>{let a=lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(t,e);a&&lodash__WEBPACK_IMPORTED_MODULE_0___default.a.set(t,"DISPLAY_".concat(e.toUpperCase()),Object(_display__WEBPACK_IMPORTED_MODULE_3__.b)(a))}))}return c&&lodash__WEBPACK_IMPORTED_MODULE_0___default.a.set(t,_consts_data__WEBPACK_IMPORTED_MODULE_2__.f.DISPLAY_VALUE,c),{row:t,value:a}},getCalculatedDataPoint=_ref10=>{let{chartConfigsMap:chartConfigsMap,element:element,dataPoints:dataPoints,chartId:chartId}=_ref10;const chartConfig=chartConfigsMap[chartId],rawFormula=getFormula({element:element,chartConfig:chartConfig});let convertedFormula=rawFormula;lodash__WEBPACK_IMPORTED_MODULE_0___default.a.each(dataPoints,((e,t)=>{convertedFormula=convertedFormula.replace(t,e)}));let result=null;try{result=eval(convertedFormula)}catch(error){return console.warn("cannot evaluate ".concat(rawFormula," (").concat(convertedFormula,")")),{value:null}}if(!/^[\d-+*\/\.]+$/.test(convertedFormula)||!lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isNumber(result))return console.warn("missing values for ".concat(rawFormula," (").concat(convertedFormula,")")),{value:null};const displayName=getField({element:element,chartConfig:chartConfig,field:_consts_data__WEBPACK_IMPORTED_MODULE_2__.d.displayName})||element;return capAndFormat({value:result,row:{[_consts_data__WEBPACK_IMPORTED_MODULE_2__.f.DISPLAY_NAME]:displayName},chartConfigsMap:chartConfigsMap,chartId:chartId,element:element})}},379:function(e,t,a){"use strict";a.r(t);var r=a(45),_=a(0),n=a.n(_),c=a(5),o=a.n(c),s=a(441),l=a(4),i=a(30);const d=o.a.memoize((async function(e){return e?await Object(s.a)(Object(i.l)(e)).catch((e=>{console.error("error in getChartOrTable()): ",e)})):null}));async function u(e){let{chartConfigsMap:t,chartIds:a,selectedIso:r}=e;return await Promise.all(a.map((e=>async function(e){let{chartConfigsMap:t,chartId:a,selectedIso:r}=e;if([].includes(a))return;const _=t[a],n=o.a.get(_,"all[0]");if(!_||!n||!n[l.d.sourceGid])return console.warn("skipping chart: ",a),null;const c=await async function(e,t){return(await d(e)).filter((e=>Object(i.b)(t)(e)))}(n[l.d.sourceGid],r),s={table:O,table_list:p,text:h};return o.a.get(s,n[l.d.chartType],g)({chartId:a,chartSettings:n,chartConfigsMap:t,chartSourceData:c,selectedIso:r})}({chartConfigsMap:t,chartId:e,selectedIso:r})))).catch((e=>{console.error("error in getCharts(): ",e)}))}function h(e){let{chartId:t,chartSettings:a,chartConfigsMap:r,chartSourceData:_,selectedIso:n}=e;const c=Object(i.g)(r[t]),s={};return o.a.each(c,(e=>{const{row:a,value:c}=Object(i.f)({chartId:t,element:e,selectedIso:n,chartConfigsMap:r,chartSourceData:_});s[e]=c,s["".concat(e,"_row")]=a})),{textValues:s,chartId:t,countryIso:n,elements:c,type:o.a.get(a,l.d.chartType),name:o.a.get(a,l.d.displayName,t)}}function p(e){let{chartId:t,chartSettings:a,chartConfigsMap:r,chartSourceData:_,selectedIso:n}=e;const c=r[t],s=o.a.get(c,[l.j.all,0]),i=Object.keys(s).filter((e=>!!l.e[e]||o.a.some(l.e.REGEX,(t=>!!t.test(e)))));let d={};try{d=Object.keys(c).filter((e=>e.startsWith("".concat(l.j._key_).concat(l.j._color_by_)))).reduce(((e,t)=>{const a=t.replace("".concat(l.j._key_).concat(l.j._color_by_),""),[r,_]=a.split("__"),n=o.a.get(c,[t,0,l.d.displayName]);return n&&o.a.set(e,[r,_],n),e}),{})}catch(u){console.warn("color mapping entered incorrectly for ".concat(t,", ignoring. ").concat(u))}return{data:_.map(((e,t)=>({rowName:t,values:i.map((t=>{const a=o.a.get(e,t),r=a&&a.toLowerCase();let _=o.a.get(s,t,"");_=_.includes(l.j._color_by_)&&_.replace(l.j._color_by_,"");return{columnName:t,columnNamed:!0,value:a,color:o.a.get(d,[_,r]),sheetRow:e}}))}))),chartId:t,countryIso:n,hideRowNames:!0,type:o.a.get(a,l.d.chartType),name:o.a.get(a,l.d.displayName,t)}}function O(e){let{chartId:t,chartSettings:a,chartConfigsMap:r,chartSourceData:_,selectedIso:n}=e;const c=r[t],s=Object(i.g)(c),d={},u=Object(i.i)({chartConfig:c,field:l.d.percentage});o.a.each(s,(e=>{const{row:a,value:c}=Object(i.f)({chartId:t,element:e,selectedIso:n,chartConfigsMap:r,chartSourceData:_});d[e]=c,d[e+"_row"]=a}));const h=o.a.uniq(s.map((e=>e.split(l.k)[0]))),p=o.a.uniq(s.map((e=>e.split(l.k)[1])));return{data:h.map((e=>({rowName:o.a.get(c,["".concat(l.j._key_).concat(e),0,l.d.displayName],e),values:p.map((t=>({columnName:o.a.get(c,["".concat(l.j._key_).concat(t),0,l.d.displayName],t),columnNamed:o.a.get(c,["".concat(l.j._key_).concat(t),0,l.d.displayName],!1),value:o.a.get(d,"".concat(e).concat(l.k).concat(t)),sheetRow:o.a.get(d,"".concat(e).concat(l.k).concat(t,"_row"))})))}))),chartId:t,countryIso:n,elements:s,isPercentage:u,type:o.a.get(a,l.d.chartType),name:o.a.get(a,l.d.displayName,t)}}function g(e){let{chartId:t,chartSettings:a,chartConfigsMap:r,chartSourceData:_,selectedIso:n}=e;const c=r[t],s=Object(i.g)(c),d=s.filter((e=>!Object(i.i)({element:e,chartConfig:c,field:l.d.hidden}))),u=o.a.get(c,[l.j.all,0,l.e.year]),h=u,p=h?Object(i.m)(u):[l.j.all],O=o.a.map(p,(e=>{const a={};return o.a.each(s,(o=>{if(Object(i.j)({element:o,chartConfig:c}))return null;const{row:s,value:l}=Object(i.f)({chartId:t,element:o,year:h?e:null,selectedIso:n,chartConfigsMap:r,chartSourceData:_});a[o]=l,a[o+"_row"]=s,a[o+"_bounds"]=Object(i.c)(s)})),o.a.each(s,(e=>{if(!Object(i.j)({element:e,chartConfig:c}))return null;const{row:_,value:n}=Object(i.d)({chartId:t,element:e,chartConfigsMap:r,dataPoints:a});a[e]=n,a[e+"_row"]=_})),o.a.each(s,(e=>{Object(i.i)({element:e,chartConfig:c,field:l.d.hidden})&&delete a[e]})),a.name=e,a})),g={};o.a.each(d,(e=>g[e]=Object(i.h)({element:e,chartConfig:r[t],field:l.d.displayName})));const m=Object(i.e)({chartSettings:a,chartConfig:c,chartElements:d});return{data:h?O:O[0],chartId:t,countryIso:n,elements:d,elementNameMap:g,colors:m,isPercentage:Object(i.i)({chartConfig:c,field:l.d.percentage}),type:o.a.get(a,l.d.chartType),name:o.a.get(a,l.d.displayName,t)}}async function m(){await async function(){if(l.c.every((e=>!!l.g[e])))return;const e=await Object(s.a)(Object(i.l)(l.g.home)).catch((e=>{console.error("error in csv(getUrl(GID_MAP.home)): ",e)}));l.c.forEach((t=>{const a=o.a.findLast(e,(e=>!!e[t]));a?l.g[t]=a[t]:console.error("No Sheet GID found for: ",t)}))}().catch((e=>{console.error("error in setConfigGids(): ",e)}));const e=(await Promise.all(l.b.map((e=>Object(s.a)(Object(i.l)(l.g[e])).catch((t=>console.error("error getting ".concat(e,": "),t))))))).reduce(((e,t,a)=>(e[l.b[a]]=t,e)),{}),{chartConfigsMap:t,chartIds:a}=await async function(){const e=await Object(s.a)(Object(i.l)(l.g.configs),i.a).catch((e=>{console.error("error in csv(getUrl(GID_MAP.configs), configParser): ",e)})),t=o.a.groupBy(e,l.d.chartId),a=o.a.uniqBy(e,"chart_id").map((e=>e.chart_id)).filter((e=>e!==l.j.all)),r=o.a.mapValues(t,((e,t)=>t===l.j.all?e:o.a.groupBy(e,l.d.element)));return o.a.each(r,((e,t)=>{t!==l.j.all&&o.a.each(e,((e,t)=>{l.j.all}))})),{chartConfigsMap:r,chartIds:a}}().catch((e=>console.error("error in getChartConfigs(): ",e)));if(console.log("@@@ ALL CONFIGS: "),console.log(t),l.i){o.a.map(t,((e,a)=>Object(i.k)({chartConfigsMap:t,chartId:a,field:l.d.sourceGid}))).forEach(d)}return{...e,chartConfigsMap:t,chartIds:a}}var f=a(25),j=a(74),b=a(447),E=a(450),M=a(448),P=a(429),D=a(449),x=a(444),I=a(445),y=a(438),C=a(439),A=a(1);const L=e=>{let{handleCountryChange:t,selectedIso:a,countries:r}=e;return Object(A.jsxs)(x.a,{sx:{width:300,marginTop:1,marginBottom:1},children:[Object(A.jsx)(I.a,{id:"country",children:"Country"}),Object(A.jsxs)(y.a,{labelId:"country",id:"country-select",value:a||"home",label:"Country",onChange:t,children:[Object(A.jsx)(C.a,{value:"home",children:r.length?"Select a country...":"Loading..."}),r.map((e=>{let{iso:t,name:a}=e;return Object(A.jsx)(C.a,{value:t,children:a},t)}))]})]})},w=e=>{let{selectedIso:t,handleCountryChange:a,countries:r}=e;return Object(A.jsx)(P.a,{sx:{flexGrow:1},children:Object(A.jsx)(M.a,{position:"fixed",sx:{background:Object(f.c)(f.d,7)},children:Object(A.jsx)(D.a,{children:Object(A.jsx)(L,{countries:r,handleCountryChange:a,selectedIso:t})})})})};var T=a(431),v=a(129),B=a(435),R=a(130),U=a(442),W=a(443),K=a(436),S=a(91),k=a(92),N=a(139),F=a(111),q=a(430),Y=a(75),G=a(454),z=a(456),V=a(451),H=a(453),X=a(455),J=a(452);const Z=.2,$=.1,Q=.7,ee=.1,te=.16,ae=1.1,re=null,_e=(e,t)=>{let{capValue:a}=t;return e?a&&e>a?">".concat(100*a,"%"):"".concat(Math.round(100*e),"%"):"Unknown %"};var ne=e=>{let{ratios:t,fillColors:a,textColors:r,content:_,firstSide:n=100,horizontal:c=!0,classes:s="",getInnerText:l=_e,bufferRatio:i=Z,textBufferRatio:d=$,defaultRatio:u=Q,capValue:h=re,fontSizeRatio:p=ee,headerFontSizeRatio:O=te,lineHeight:g=ae}=e;const m=(e,t)=>c?t:e,f=n*(1+i),j=n*(1+d);let b=n,E=0,M=0;const P=n*p,D=n*O,x=[],I=[],y=[];o.a.each(t,((e,n)=>{const c=l(e,{capValue:h});e=e||u,h&&e>h&&(e=h);const s=a[n],i=a[n+1],d=r[n+1];x.push(Object(A.jsx)("rect",{x:m(E,M),y:m(M,E),width:b,height:b,fill:s},"rect1-"+n));const{below:p=[]}=o.a.get(_,n,{}),O=Object(A.jsxs)("text",{fontSize:P,y:m(M+P,j+P),children:[Object(A.jsx)("tspan",{className:"percent",x:m(j,M),style:{fill:d,fontSize:D},children:c}),p.map(((e,t)=>Object(A.jsx)("tspan",{className:"description",x:m(j,M),dy:P*g,children:e},n+t)))]},"text-"+n);I.push(O);let C=b*e;const L=(b-C)/2;if(E+=L,M+=L,b=C,x.push(Object(A.jsx)("rect",{x:m(E,M),y:m(M,E),width:b,height:b,fill:i},"rect2-"+n)),n===t.length-1)return;const w={strokeWidth:".4",strokeDasharray:".8 1"},T=Object(A.jsx)("line",{style:w,stroke:i,x1:m(E,M+b),x2:m(E,M+f),y1:m(M+b,E),y2:m(M+f,E)},"line1-"+n),v=Object(A.jsx)("line",{style:w,stroke:i,x1:m(E+b,M+b),x2:m(E+b,M+f),y1:m(M+b,E+b),y2:m(M+f,E+b)},"line2-"+n);y.push(T,v),M+=f}));const C=n+(j+n),L=M+n,w=M+f,T=j+(D+5*P),v="nested-boxes "+s;return Object(A.jsx)("div",{className:v,children:Object(A.jsxs)("svg",{viewBox:"0 -2 ".concat(m(C,w)," ").concat(m(L,T)),children:[x,I,y]})})},ce=a(43),oe=a(437);const se=e=>{let{active:t,payload:a,label:r,isArea:_}=e;if(t&&a&&a.length){const e=_?a:o.a.sortBy(a,"value");let t=null;return Object(A.jsxs)(q.a,{sx:{background:"white",p:2},className:"custom-tooltip",children:[Object(A.jsx)("strong",{className:"label",children:r}),e.reverse().map((e=>{if(e.dataKey.includes("_bounds"))return;const a=o.a.get(e.payload,e.dataKey+"_bounds",[]),r=[l.e.value_lower,l.e.value_upper].map(((t,r)=>o.a.get(e.payload,[e.dataKey+"_row","DISPLAY_".concat(t.toUpperCase())],a[r]))),_=o.a.get(e.payload,[e.dataKey+"_row",l.f.DISPLAY_VALUE],e.value);return t=t||o.a.get(e.payload,[e.dataKey+"_row",l.e.source_display])||o.a.get(e.payload,[e.dataKey+"_row",l.e.source_database]),Object(A.jsxs)(E.a,{children:[Object(A.jsx)("svg",{width:"18",viewBox:"0 0 160 100",xmlns:"http://www.w3.org/2000/svg",children:Object(A.jsx)("circle",{cx:"50",cy:"50",r:"50",fill:e.fill})}),e.name,": ",_," ",!!a.length&&"(".concat(r.join(" - "),")")]},e.dataKey)})),t&&Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("br",{}),Object(A.jsx)("u",{children:"Source"}),": ",t]})]})}return null},le=e=>{let{selectedIso:t,chartData:a,countries:r}=e;const[_,c]=n.a.useState({}),s=e=>{const{data:t,chartId:a,elements:r,type:n,isPercentage:s,colors:l,elementNameMap:i}=e,d="area"===n,[,u]=d?[T.a,v.a]:[B.a,R.a],h=s?e=>Object(ce.c)(e):e=>Object(ce.b)(e),p=e=>o.a.get(i,e,e);return Object(A.jsx)(U.a,{width:"99%",aspect:1.25,maxHeight:400,children:Object(A.jsxs)(W.a,{data:t,margin:{top:30,right:30,left:0,bottom:0},children:[Object(A.jsx)(K.a,{strokeDasharray:"3 3"}),Object(A.jsx)(S.a,{dataKey:"name"}),Object(A.jsx)(k.a,{width:80,domain:s?[0,100]:void 0,tickFormatter:h}),Object(A.jsx)(N.a,{cursor:{stroke:Object(f.c)(f.h,10),strokeWidth:1},content:Object(A.jsx)(se,{isArea:d})}),Object(A.jsx)(F.a,{onClick:e=>{console.log(e.dataKey);const t=o.a.cloneDeep(_),r=o.a.get(t,[a,e.dataKey],!1);o.a.set(t,[a,e.dataKey],!r),c(t)},iconSize:d?8:14,iconType:d&&"circle"}),r.map(((e,r)=>!d&&o.a.some(t,(t=>o.a.get(t,[e+"_bounds"],[]).length))?Object(A.jsx)(v.a,{dataKey:e+"_bounds",hide:o.a.get(_,[a,e],!1),legendType:"none",tooltipType:"none",stroke:Object(f.c)(l[r],f.f-3),fill:Object(f.c)(l[r],f.b-3)},r+"_b"):null)),r.map(((e,t)=>Object(A.jsx)(u,{dataKey:e,name:p(e),hide:o.a.get(_,[a,e],!1),stackId:d?1:t+1e3,stroke:Object(f.c)(l[t],f.f),fill:Object(f.c)(l[t],f.b)},t)))]})})},i=e=>{const{data:t,hideRowNames:a}=e,r=t[0];if(!r)return null;const _=r.values.map((e=>{let{columnName:t,columnNamed:a}=e;return Object(A.jsx)(V.a,{scope:"col",children:a&&t},t)})),n=t.map((e=>{let{rowName:t,values:r}=e;return Object(A.jsxs)(J.a,{children:[!a&&Object(A.jsx)(V.a,{scope:"row",component:"th",children:t}),r.map((e=>{let{value:t,columnName:a,sheetRow:r,color:_}=e;return Object(A.jsx)(V.a,{sx:{background:_},children:o.a.get(r,l.f.DISPLAY_VALUE,o.a.get([t],0,"N/A"))},a)}))]},t)}));return Object(A.jsx)(U.a,{children:Object(A.jsx)(H.a,{children:Object(A.jsxs)(G.a,{sx:{"& tbody tr:nth-of-type(odd)":{background:Object(f.c)(f.g,6)},"& td, & thead th":{textAlign:"right"},"& th":{fontWeight:"bold",minWidth:"60px"}},children:[Object(A.jsx)(X.a,{children:Object(A.jsxs)(J.a,{children:[!a&&Object(A.jsx)(V.a,{scope:"col"}),_]})}),Object(A.jsx)(z.a,{children:n})]})})})},d=e=>{const t=Object(Y.a)(),a=Object(oe.a)(t.breakpoints.down("sm")),{data:r,elements:_,colors:n,elementNameMap:c}=(Object(oe.a)(t.breakpoints.up("md")),e),o=_.map((e=>{const t=r[e];return t&&t/100})),s=_.map((e=>({below:c[e].split(l.h)})));return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(ne,{title:"title",bufferRatio:a?.2:.8,lineHeight:a?1.1:1.4,textBufferRatio:.2,firstSide:20,horizontal:!a,ratios:o,fillColors:n.map((e=>Object(f.c)(e,8))),textColors:n.map((e=>Object(f.c)(e,9))),content:s}),Object(A.jsx)("br",{})]})},u=e=>{const a=r.find((e=>e.iso===t));return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(E.a,{variant:"h2",component:"h1",sx:{fontWeight:500,lineHeight:1,fontSize:{lg:"6rem"},maxWidth:{lg:760,xl:"100%"},mb:{sm:1,lg:2}},children:a&&a.name}),Object(A.jsx)(q.a,{sx:{display:{sm:"flex"},"& dl:not(:last-child)":{mr:{sm:4,md:10}},"& dt h2":{fontWeight:100,letterSpacing:".8px",textTransform:"uppercase"},"& dt, dd":{m:0}},children:e.elements.map((t=>Object(A.jsxs)("dl",{children:[Object(A.jsx)("dt",{children:Object(A.jsx)(E.a,{variant:"h6",component:"h2",children:o.a.get(e,["textValues","".concat(t,"_row"),l.f.DISPLAY_NAME],"")})}),Object(A.jsx)("dd",{children:Object(A.jsx)(E.a,{variant:"h4",component:"h2",children:o.a.get(e,["textValues","".concat(t,"_row"),l.f.DISPLAY_VALUE],e.textValues[t])})})]},t)))})]})},h=e=>{if(!e)return null;const{type:t,chartId:a,name:r}=e;return"intro"===a?Object(A.jsx)(q.a,{sx:{flexBasis:{xs:"100%",xl:600},flexGrow:{xl:0},p:3},children:u(e)},a):"table"===t||"table_list"===t?Object(A.jsxs)(q.a,{sx:{flexBasis:"100%",maxWidth:864,p:3},children:[Object(A.jsx)(E.a,{variant:"h5",component:"h3",children:r}),i(e)]},a):"nested"===t?Object(A.jsxs)(A.Fragment,{children:[Object(A.jsxs)(q.a,{sx:{flexBasis:{xs:"100%",xl:700},flexGrow:{xl:1},flexShrink:{xl:1},mr:"auto",ml:{xl:"auto"},maxWidth:864,p:3},children:[Object(A.jsx)(E.a,{pb:3,variant:"h5",component:"h3",children:r}),d(e)]},a),Object(A.jsx)(q.a,{sx:{flexBasis:"100%",height:0}})]}):Object(A.jsxs)(q.a,{sx:{width:"100%",maxWidth:{md:"44%",xl:"29%"},p:3},children:[Object(A.jsx)(E.a,{variant:"h5",component:"h3",children:r}),s(e)]},a)};return Object(A.jsx)(q.a,{display:"flex",flexWrap:"wrap",pt:8,sx:{justifyContent:{xs:"space-evenly",md:"space-between"}},children:a.map(((e,t)=>Object(A.jsx)("div",{children:h(e)},t)))})},ie=e=>{let{homeCopy:t}=e;if(!t||!t.length)return null;const a=Object.keys(t[0]).filter((e=>e.startsWith(l.a.TAP)));return Object(A.jsxs)(P.a,{pt:"72px",px:3,children:[Object(A.jsx)(P.a,{children:t.map(((e,t)=>!!e[l.a.blurb]&&Object(A.jsx)(E.a,{variant:"body1",sx:{fontSize:{sm:"smaller",md:"unset"}},pt:1,dangerouslySetInnerHTML:{__html:e[l.a.blurb]}},t)))}),Object(A.jsxs)(P.a,{py:5,className:"tap-lists-container",children:[Object(A.jsx)(E.a,{variant:"h6",component:"h2",dangerouslySetInnerHTML:{__html:"Technical Assistance Providers"}}),Object(A.jsx)(P.a,{className:"tap-lists",sx:{display:{sm:"flex"}},children:a.map((e=>(e=>Object(A.jsxs)(P.a,{sx:{background:"#f2c2b4",p:1,m:1,borderRadius:"8px",height:"100%"},children:[Object(A.jsx)(E.a,{variant:"body1",sx:{fontSize:{sm:"smaller",md:"unset"}},variant:"h7",component:"h3",dangerouslySetInnerHTML:{__html:e.replace(l.a.TAP,"")}}),Object(A.jsx)("ul",{style:{paddingInlineStart:"20px"},children:t.map(((t,a)=>!!t[e]&&Object(A.jsx)("li",{children:Object(A.jsx)(E.a,{variant:"body1",sx:{fontSize:{sm:"smaller",md:"unset"}},dangerouslySetInnerHTML:{__html:t[e]}},a)},t[e])))})]},e))(e)))})]})]})},de=e=>{let{dictionary:t}=e;const a=Object(j.a)();return Object(A.jsxs)(P.a,{sx:{px:{xs:3,lg:10},mx:{lg:5},mb:{lg:5},py:9,mt:9,background:a.palette.background.paper,"& dl":{display:"inline-block",width:"100%",mt:0,mb:{lg:3},fontSize:15},"& dd":{ml:0,mt:{xs:1},fontSize:13}},children:[Object(A.jsx)(E.a,{variant:"h6",component:"h2",dangerouslySetInnerHTML:{__html:"Glossary"}}),Object(A.jsx)(P.a,{sx:{columnCount:{md:2,xl:3},columnGap:{xs:"2rem",lg:"5rem"},mt:3},children:t.sort(((e,t)=>e.term.toLowerCase()>t.term.toLowerCase())).map((e=>{let{[l.a.term]:t,[l.a.definition]:a}=e;return Object(A.jsxs)("dl",{children:[Object(A.jsx)("dt",{children:Object(A.jsx)("strong",{children:t})}),Object(A.jsx)("dd",{children:Object(A.jsx)(E.a,{dangerouslySetInnerHTML:{__html:Object(ce.d)(a)}})})]},t)}))})]})};function ue(){const[e,t]=n.a.useState(null),[a,r]=n.a.useState([]),[_,c]=n.a.useState([]),[s,l]=n.a.useState([]),[i,d]=n.a.useState([]),[h,p]=n.a.useState([]),[O,g]=n.a.useState(null);n.a.useEffect((()=>{m().then((e=>{c(e.dictionary.filter((e=>e.term&&e.definition))),l(e.countries.filter((e=>e.iso&&e.name))),d(e.homecopy),p(e.chartIds),g(e.chartConfigsMap)}))}),[]),n.a.useEffect((()=>{e&&async function(e){let{chartConfigsMap:t,chartIds:a,selectedIso:r}=e;return{charts:await u({chartConfigsMap:t,chartIds:a,selectedIso:r}).catch((e=>{console.error("error in getCharts(selectedIso): ",e)}))}}({chartConfigsMap:O,chartIds:h,selectedIso:e}).then((e=>{console.log("@@@ ALL DATA: "),console.log(e.charts),r(e.charts)}))}),[e]);const M=!o.a.some(a,(t=>t&&t.countryIso===e)),P=Object(j.a)();return Object(A.jsxs)(b.a,{elevation:0,sx:{background:Object(f.c)(f.g,3),color:Object(f.c)(f.g,12),fontFamily:P.typography.fontFamily,p:{lg:6}},children:[Object(A.jsx)(w,{countries:s,handleCountryChange:e=>{const a=e.target.value,r=o.a.some(s,(e=>{let{iso:t}=e;return t===a}));t(r?a:null)},selectedIso:e}),Object(A.jsx)("br",{}),e?M?Object(A.jsx)(q.a,{pt:"50vh",children:Object(A.jsx)(E.a,{variant:"body1",sx:{textAlign:"center"},dangerouslySetInnerHTML:{__html:"loading..."}})}):Object(A.jsx)(le,{countries:s,selectedIso:e,chartData:a}):Object(A.jsx)(ie,{homeCopy:i}),!!_.length&&!M&&Object(A.jsx)(de,{dictionary:_}),false]})}var he=a(170),pe=a(446);const Oe=Object(he.a)({palette:{primary:{main:Object(f.c)(f.g,11)},secondary:{main:Object(f.c)(f.h,8)}},typography:{fontFamily:["Archivo","sans-serif"].join(",")}});function ge(){return Object(A.jsx)(pe.a,{theme:Oe,children:Object(A.jsx)(ue,{})})}const me=document.getElementById("root");Object(r.render)(Object(A.jsx)(ge,{}),me)},4:function(e,t,a){"use strict";a.d(t,"i",(function(){return r})),a.d(t,"k",(function(){return _})),a.d(t,"h",(function(){return n})),a.d(t,"b",(function(){return c})),a.d(t,"c",(function(){return o})),a.d(t,"g",(function(){return s})),a.d(t,"d",(function(){return l})),a.d(t,"e",(function(){return i})),a.d(t,"j",(function(){return d})),a.d(t,"a",(function(){return u})),a.d(t,"f",(function(){return h}));const r=!0,_="__",n="__",c=["dictionary","countries","homecopy"],o=["configs",...c],s={home:"0"},l={chartId:"chart_id",sourceGid:"source_gid",element:"element",displayName:"display_name",capPercentage:"cap_percentage",percentageDecimals:"percentage_decimals",coarseIntegerFormatting:"coarse_integer_formatting",colorOverride:"color_override",chartType:"chart_type",modelled:"modelled",formula:"formula",hidden:"hidden",valueField:"value_field",percentage:"percentage"},i={country_iso_code:"country_iso_code",sourceYear:"source_year",value:"value",year:"year",indicator:"indicator",indicator_description:"indicator_description",sex:"sex",age:"age",population_segment:"population_segment",population_sub_group:"population_sub_group",country_name:"country_name",area_name:"area_name",geographic_scope:"geographic_scope",value_upper:"value_upper",value_lower:"value_lower",value_comment:"value_comment",unit_format:"unit_format",source_organization:"source_organization",source_database:"source_database",source_display:"source_display",notes:"notes",modality:"modality",modality_category:"modality_category",import_file:"import_file",import_timestamp:"import_timestamp",row_id:"row_id",suppressed:"suppressed",Deliverable:"Deliverable",Supplier:"Supplier",REGEX:{quarter:/Q\d\s\d{4}/}},d={all:"all",_key_:"_key_",_color_by_:"_color_by_"},u={term:"term",definition:"definition",iso:"iso",name:"name",blurb:"blurb",TAP:"_TAP_"},h={DISPLAY_NAME:"DISPLAY_NAME",DISPLAY_VALUE:"DISPLAY_VALUE",DISPLAY_VALUE_LOWER:"DISPLAY_".concat(i.value_lower.toUpperCase()),DISPLAY_VALUE_UPPER:"DISPLAY_".concat(i.value_upper.toUpperCase())}},43:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"c",(function(){return c})),a.d(t,"b",(function(){return o})),a.d(t,"d",(function(){return s}));var r=a(5),_=a.n(r);const n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=Number(e),t.cap?Math.min(e,Number(t.cap)):e},c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e=Number(e),!isFinite(e))return"NA";if(t.cap&&e>Number(t.cap)){return">".concat(t.cap,"%")}e>100&&console.warn("Incorrect %");const a=t.decimals||0;return _.a.round(e,a).toString()+"%"},o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e=Number(e),t.coarseFormatting){if(e>1e9)return _.a.round(e/1e9,1).toString()+" billion";if(e>1e6)return _.a.round(e/1e6,1).toString()+" million";if(e<100)return"<100";if(e<200)return"<200";if(e<500)return"<500";if(e<1e3)return"<1000";e=Number(e.toPrecision(2))}return e.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1 ")},s=e=>e.replaceAll("<a ","<a target='_blank' rel='noopener noreferrer'")}},[[379,1,2]]]);
//# sourceMappingURL=main.1c5630a3.chunk.js.map