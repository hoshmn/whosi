(this.webpackJsonpwhosi=this.webpackJsonpwhosi||[]).push([[0],{25:function(e,t,a){"use strict";a.d(t,"g",(function(){return n})),a.d(t,"h",(function(){return c})),a.d(t,"d",(function(){return _})),a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return s})),a.d(t,"f",(function(){return l})),a.d(t,"e",(function(){return i})),a.d(t,"c",(function(){return d}));var r=a(19);const n=r.v,c=r.k,_=r.g,o=[[r.p,r.h,r.r],[r.z,r.k,r.g],[r.w,r.d,r.A,r.v]],s=8,l=11,i=[r.z,r.t,r.e,r.q,r.r,r.s,r.A,r.k,r.b,r.f,r.y,r.j,r.h,r.p,r.d,r.w,r.n,r.l,r.B,r.a,r.i,r.m,r.x,r.u,r.o,r.v,r.g,r.c],d=(e,t)=>{if("string"===typeof e)return e;return e[Object.keys(e)[0].replace(/\d/,"")+t]}},30:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"l",(function(){return getUrl})),__webpack_require__.d(__webpack_exports__,"a",(function(){return configParser})),__webpack_require__.d(__webpack_exports__,"b",(function(){return filterByCountryGenerator})),__webpack_require__.d(__webpack_exports__,"g",(function(){return getElements})),__webpack_require__.d(__webpack_exports__,"k",(function(){return getSetting})),__webpack_require__.d(__webpack_exports__,"h",(function(){return getField})),__webpack_require__.d(__webpack_exports__,"i",(function(){return getFieldBoolean})),__webpack_require__.d(__webpack_exports__,"j",(function(){return getFormula})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getBounds})),__webpack_require__.d(__webpack_exports__,"e",(function(){return getColors})),__webpack_require__.d(__webpack_exports__,"m",(function(){return transformYearRange})),__webpack_require__.d(__webpack_exports__,"f",(function(){return getDataPoint})),__webpack_require__.d(__webpack_exports__,"d",(function(){return getCalculatedDataPoint}));var lodash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(6),lodash__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__),_consts_colors__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(25),_consts_data__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(8),_display__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(43);const SPECIAL_FILTERS_MAP={_NONE_:lodash__WEBPACK_IMPORTED_MODULE_0___default.a.negate(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.identity),_SOMETHING_:lodash__WEBPACK_IMPORTED_MODULE_0___default.a.identity,_ANY_:lodash__WEBPACK_IMPORTED_MODULE_0___default.a.stubTrue},defaultCompFn=(e,t)=>e.toLowerCase()===t.toLowerCase(),getUrl=e=>"https://docs.google.com/spreadsheets/d/e/2PACX-1vSAEOXOt5aHDcb35lpCsSO5AvHTZPplXHrHGaIXTJjCtW_B96D0MOItWZLGv1j4lagTxnuVClms6M0X/pub?gid=".concat(e,"&single=true&output=csv"),configParser=e=>{if(e[_consts_data__WEBPACK_IMPORTED_MODULE_2__.d.chartId])return delete e[""],lodash__WEBPACK_IMPORTED_MODULE_0___default.a.each(e,((t,a)=>{""===t&&delete e[a]})),e},filterByCountryGenerator=e=>t=>t[_consts_data__WEBPACK_IMPORTED_MODULE_2__.e.country_iso_code]===e?t:null,getElements=e=>Object.keys(e).filter((e=>"all"!==e&&!e.startsWith("_key_"))),getSetting=e=>{let{element:t="all",chartConfigsMap:a,field:r,chartId:n="all"}=e;return lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(a,[n,t,0,r])||lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(a,[n,"all",0,r])||lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(a,["all",0,r])},getField=e=>{let{element:t="all",chartConfig:a,field:r}=e;return lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(a,[t,0,r])},getFieldBoolean=e=>{let{element:t="all",chartConfig:a,field:r}=e;return!!getField({element:t,chartConfig:a,field:r})},getFormula=e=>{let{element:t,chartConfig:a}=e;return getField({element:t,chartConfig:a,field:_consts_data__WEBPACK_IMPORTED_MODULE_2__.d.formula})},getBounds=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{[_consts_data__WEBPACK_IMPORTED_MODULE_2__.e.value_lower]:t,[_consts_data__WEBPACK_IMPORTED_MODULE_2__.e.value_upper]:a}=e;if(parseFloat(t)&&parseFloat(a))return[parseFloat(t),parseFloat(a)]},getColors=e=>{let{chartSettings:t,chartConfig:a,chartElements:r}=e,n=parseInt(Math.abs(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(t,_consts_data__WEBPACK_IMPORTED_MODULE_2__.d.colorOverride)));n=((n||1)-1)%_consts_colors__WEBPACK_IMPORTED_MODULE_1__.a.length;const c=_consts_colors__WEBPACK_IMPORTED_MODULE_1__.a[n],_=r.map(((e,t)=>getField({chartConfig:a,element:e,field:_consts_data__WEBPACK_IMPORTED_MODULE_2__.d.colorOverride})||c[t%c.length]));return"nested"===lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(t,_consts_data__WEBPACK_IMPORTED_MODULE_2__.d.chartType)&&_.push(c[r.length%c.length]),_},transformYearRange=e=>{const t=/\[(\d+)-(\d+)\]/.exec(e);if(!t||!t.length>1)return[];const a=parseInt(t[1]),r=parseInt(t[2]);return lodash__WEBPACK_IMPORTED_MODULE_0___default.a.range(a,r+1).map(String)},getFilter=e=>{let{chartId:t,element:a,year:r=null,selectedIso:n,chartConfigsMap:c}=e;const _=lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(c,"all[0]",{}),o=lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(c,[t,"all",0],{}),[s,...l]=lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(c,[t,a],[{}]),i={..._,...o,...s,selectedIso:n};return r&&(i.year=r),i},getRow=e=>{let{filter:t,chartSourceData:a}=e;const r=lodash__WEBPACK_IMPORTED_MODULE_0___default.a.filter(a,(e=>lodash__WEBPACK_IMPORTED_MODULE_0___default.a.every(t,((t,a)=>{if(!_consts_data__WEBPACK_IMPORTED_MODULE_2__.e[a])return!0;const r=e[a]||"";return!!(SPECIAL_FILTERS_MAP[t]||defaultCompFn)(r,t)}))));return lodash__WEBPACK_IMPORTED_MODULE_0___default.a.maxBy(r,(e=>Number(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(e,_consts_data__WEBPACK_IMPORTED_MODULE_2__.e.year,0))+Number(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(e,_consts_data__WEBPACK_IMPORTED_MODULE_2__.e.sourceYear,0))/1e4))},getDataPoint=e=>{let{chartId:t,element:a,year:r=null,selectedIso:n,chartConfigsMap:c,chartSourceData:_}=e;const o=getFilter({chartId:t,element:a,year:r,selectedIso:n,chartConfigsMap:c,chartSourceData:_}),s=getRow({filter:o,chartSourceData:_}),l=lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(o,_consts_data__WEBPACK_IMPORTED_MODULE_2__.d.valueField,_consts_data__WEBPACK_IMPORTED_MODULE_2__.e.value);let i=lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(s,l,null);if(!s||!i)return{};const d=getField({element:a,chartConfig:c[t],field:_consts_data__WEBPACK_IMPORTED_MODULE_2__.d.displayName});return d&&lodash__WEBPACK_IMPORTED_MODULE_0___default.a.set(s,_consts_data__WEBPACK_IMPORTED_MODULE_2__.f.DISPLAY_NAME,d),l&&l!==_consts_data__WEBPACK_IMPORTED_MODULE_2__.e.value?{row:s,value:i}:capAndFormat({row:s,value:i,chartConfigsMap:c,chartId:t,element:a})},capAndFormat=e=>{let{row:t,value:a,chartConfigsMap:r,chartId:n,element:c}=e,_=a;if(getFieldBoolean({chartConfig:r[n],field:_consts_data__WEBPACK_IMPORTED_MODULE_2__.d.percentage})){const e={cap:getSetting({chartConfigsMap:r,chartId:n,element:c,field:_consts_data__WEBPACK_IMPORTED_MODULE_2__.d.capPercentage}),decimals:getSetting({chartConfigsMap:r,chartId:n,element:c,field:_consts_data__WEBPACK_IMPORTED_MODULE_2__.d.percentageDecimals})};_=Object(_display__WEBPACK_IMPORTED_MODULE_3__.c)(a,e),a=Object(_display__WEBPACK_IMPORTED_MODULE_3__.a)(a,e),_display__WEBPACK_IMPORTED_MODULE_3__.a&&lodash__WEBPACK_IMPORTED_MODULE_0___default.a.set(t,_consts_data__WEBPACK_IMPORTED_MODULE_2__.e.value,a),[_consts_data__WEBPACK_IMPORTED_MODULE_2__.e.value_lower,_consts_data__WEBPACK_IMPORTED_MODULE_2__.e.value_upper].forEach((a=>{const r=lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(t,a);r&&lodash__WEBPACK_IMPORTED_MODULE_0___default.a.set(t,"DISPLAY_".concat(a.toUpperCase()),Object(_display__WEBPACK_IMPORTED_MODULE_3__.c)(r,e));const n=r&&Object(_display__WEBPACK_IMPORTED_MODULE_3__.a)(r,e);n&&lodash__WEBPACK_IMPORTED_MODULE_0___default.a.set(t,a,n)}))}else{const e=!!getSetting({chartConfigsMap:r,chartId:n,element:c,field:_consts_data__WEBPACK_IMPORTED_MODULE_2__.d.coarseIntegerFormatting});_=Object(_display__WEBPACK_IMPORTED_MODULE_3__.b)(a,{coarseFormatting:e}),[_consts_data__WEBPACK_IMPORTED_MODULE_2__.e.value_lower,_consts_data__WEBPACK_IMPORTED_MODULE_2__.e.value_upper].forEach((e=>{let a=lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(t,e);a&&lodash__WEBPACK_IMPORTED_MODULE_0___default.a.set(t,"DISPLAY_".concat(e.toUpperCase()),Object(_display__WEBPACK_IMPORTED_MODULE_3__.b)(a))}))}return _&&lodash__WEBPACK_IMPORTED_MODULE_0___default.a.set(t,_consts_data__WEBPACK_IMPORTED_MODULE_2__.f.DISPLAY_VALUE,_),{row:t,value:a}},getCalculatedDataPoint=_ref10=>{let{chartConfigsMap:chartConfigsMap,element:element,dataPoints:dataPoints,chartId:chartId}=_ref10;const chartConfig=chartConfigsMap[chartId],rawFormula=getFormula({element:element,chartConfig:chartConfig});let convertedFormula=rawFormula;lodash__WEBPACK_IMPORTED_MODULE_0___default.a.each(dataPoints,((e,t)=>{convertedFormula=convertedFormula.replace(t,e)}));let result=null;try{result=eval(convertedFormula)}catch(error){return console.warn("cannot evaluate ".concat(rawFormula," (").concat(convertedFormula,")")),{value:null}}if(!/^[\d-+*\/\.]+$/.test(convertedFormula)||!lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isNumber(result))return console.warn("missing values for ".concat(rawFormula," (").concat(convertedFormula,")")),{value:null};const displayName=getField({element:element,chartConfig:chartConfig,field:_consts_data__WEBPACK_IMPORTED_MODULE_2__.d.displayName})||element;return capAndFormat({value:result,row:{[_consts_data__WEBPACK_IMPORTED_MODULE_2__.f.DISPLAY_NAME]:displayName},chartConfigsMap:chartConfigsMap,chartId:chartId,element:element})}},379:function(e,t,a){"use strict";a.r(t);var r=a(45),n=a(0),c=a.n(n),_=a(6),o=a.n(_),s=a(441),l=a(8),i=a(30);const d=o.a.memoize((async function(e){return e?await Object(s.a)(Object(i.l)(e)).catch((e=>{console.error("error in getChartOrTable()): ",e)})):null}));async function u(e){let{chartConfigsMap:t,chartIds:a,selectedIso:r}=e;return await Promise.all(a.map((e=>async function(e){let{chartConfigsMap:t,chartId:a,selectedIso:r}=e;const n=t[a],c=o.a.get(n,"all[0]");if(!n||!c||!c[l.d.sourceGid])return console.warn("skipping chart: ",a),null;const _=await async function(e,t){return(await d(e)).filter((e=>Object(i.b)(t)(e)))}(c[l.d.sourceGid],r),s={table:p,text:h};return o.a.get(s,c[l.d.chartType],g)({chartId:a,chartSettings:c,chartConfigsMap:t,chartSourceData:_,selectedIso:r})}({chartConfigsMap:t,chartId:e,selectedIso:r})))).catch((e=>{console.error("error in getCharts(): ",e)}))}function h(e){let{chartId:t,chartSettings:a,chartConfigsMap:r,chartSourceData:n,selectedIso:c}=e;console.log(t,a,r,n,c);const _=Object(i.g)(r[t]),s={};return o.a.each(_,(e=>{const{row:a,value:_}=Object(i.f)({chartId:t,element:e,selectedIso:c,chartConfigsMap:r,chartSourceData:n});s[e]=_,s["".concat(e,"_row")]=a})),{textValues:s,chartId:t,countryIso:c,elements:_,type:o.a.get(a,l.d.chartType),name:o.a.get(a,l.d.displayName,t)}}function p(e){let{chartId:t,chartSettings:a,chartConfigsMap:r,chartSourceData:n,selectedIso:c}=e;const _=r[t],s=Object(i.g)(_),d={},u=Object(i.i)({chartConfig:_,field:l.d.percentage});o.a.each(s,(e=>{const{row:a,value:_}=Object(i.f)({chartId:t,element:e,selectedIso:c,chartConfigsMap:r,chartSourceData:n});d[e]=_,d[e+"_row"]=a}));const h=o.a.uniq(s.map((e=>e.split(l.j)[0]))),p=o.a.uniq(s.map((e=>e.split(l.j)[1])));return{data:h.map((e=>({row:o.a.get(_,["_key_".concat(e),0,l.d.displayName],e),values:p.map((t=>({column:o.a.get(_,["_key_".concat(t),0,l.d.displayName],t),columnNamed:o.a.get(_,["_key_".concat(t),0,l.d.displayName],!1),value:o.a.get(d,"".concat(e).concat(l.j).concat(t)),sheetRow:o.a.get(d,"".concat(e).concat(l.j).concat(t,"_row"))})))}))),chartId:t,countryIso:c,elements:s,isPercentage:u,type:o.a.get(a,l.d.chartType),name:o.a.get(a,l.d.displayName,t)}}function g(e){let{chartId:t,chartSettings:a,chartConfigsMap:r,chartSourceData:n,selectedIso:c}=e;const _=r[t],s=Object(i.g)(_),d=s.filter((e=>!Object(i.i)({element:e,chartConfig:_,field:l.d.hidden}))),u=o.a.get(_,["all",0,l.e.year]),h=u,p=h?Object(i.m)(u):["all"],g=o.a.map(p,(e=>{const a={};return o.a.each(s,(o=>{if(Object(i.j)({element:o,chartConfig:_}))return null;const{row:s,value:l}=Object(i.f)({chartId:t,element:o,year:h?e:null,selectedIso:c,chartConfigsMap:r,chartSourceData:n});a[o]=l,a[o+"_row"]=s,a[o+"_bounds"]=Object(i.c)(s)})),o.a.each(s,(e=>{if(!Object(i.j)({element:e,chartConfig:_}))return null;const{row:n,value:c}=Object(i.d)({chartId:t,element:e,chartConfigsMap:r,dataPoints:a});a[e]=c,a[e+"_row"]=n})),o.a.each(s,(e=>{Object(i.i)({element:e,chartConfig:_,field:l.d.hidden})&&delete a[e]})),a.name=e,a})),O={};o.a.each(d,(e=>O[e]=Object(i.h)({element:e,chartConfig:r[t],field:l.d.displayName})));const f=Object(i.e)({chartSettings:a,chartConfig:_,chartElements:d});return{data:h?g:g[0],chartId:t,countryIso:c,elements:d,elementNameMap:O,colors:f,isPercentage:Object(i.i)({chartConfig:_,field:l.d.percentage}),type:o.a.get(a,l.d.chartType),name:o.a.get(a,l.d.displayName,t)}}async function O(){await async function(){if(l.c.every((e=>!!l.g[e])))return;const e=await Object(s.a)(Object(i.l)(l.g.home)).catch((e=>{console.error("error in csv(getUrl(GID_MAP.home)): ",e)}));l.c.forEach((t=>{const a=o.a.findLast(e,(e=>!!e[t]));a?l.g[t]=a[t]:console.error("No Sheet GID found for: ",t)}))}().catch((e=>{console.error("error in setConfigGids(): ",e)}));const e=(await Promise.all(l.b.map((e=>Object(s.a)(Object(i.l)(l.g[e])).catch((t=>console.error("error getting ".concat(e,": "),t))))))).reduce(((e,t,a)=>(e[l.b[a]]=t,e)),{}),{chartConfigsMap:t,chartIds:a}=await async function(){const e=await Object(s.a)(Object(i.l)(l.g.configs),i.a).catch((e=>{console.error("error in csv(getUrl(GID_MAP.configs), configParser): ",e)})),t=o.a.groupBy(e,l.d.chartId),a=o.a.uniqBy(e,"chart_id").map((e=>e.chart_id)).filter((e=>"all"!==e)),r=o.a.mapValues(t,((e,t)=>"all"===t?e:o.a.groupBy(e,l.d.element)));return o.a.each(r,((e,t)=>{"all"!==t&&o.a.each(e,((e,t)=>{}))})),{chartConfigsMap:r,chartIds:a}}().catch((e=>console.error("error in getChartConfigs(): ",e)));if(console.log("@@@ ALL CONFIGS: "),console.log(t),l.i){o.a.map(t,((e,a)=>Object(i.k)({chartConfigsMap:t,chartId:a,field:l.d.sourceGid}))).forEach(d)}return{...e,chartConfigsMap:t,chartIds:a}}var f=a(25),m=a(74),b=a(447),j=a(450),E=a(448),M=a(429),x=a(449),P=a(444),D=a(445),I=a(438),C=a(439),y=a(1);const A=e=>{let{handleCountryChange:t,selectedIso:a,countries:r}=e;return Object(y.jsxs)(P.a,{sx:{width:300,marginTop:1,marginBottom:1},children:[Object(y.jsx)(D.a,{id:"country",children:"Country"}),Object(y.jsxs)(I.a,{labelId:"country",id:"country-select",value:a||"home",label:"Country",onChange:t,children:[Object(y.jsx)(C.a,{value:"home",children:r.length?"Select a country...":"Loading..."}),r.map((e=>{let{iso:t,name:a}=e;return Object(y.jsx)(C.a,{value:t,children:a},t)}))]})]})},L=e=>{let{selectedIso:t,handleCountryChange:a,countries:r}=e;return Object(y.jsx)(M.a,{sx:{flexGrow:1},children:Object(y.jsx)(E.a,{position:"fixed",sx:{background:Object(f.c)(f.d,7)},children:Object(y.jsx)(x.a,{children:Object(y.jsx)(A,{countries:r,handleCountryChange:a,selectedIso:t})})})})};var w=a(431),v=a(129),T=a(435),B=a(130),U=a(442),R=a(443),W=a(436),K=a(91),S=a(92),k=a(139),F=a(111),N=a(430),q=a(75),Y=a(454),G=a(456),z=a(451),V=a(453),H=a(455),X=a(452);const J=.2,Z=.1,$=.7,Q=.1,ee=.16,te=1.1,ae=null,re=(e,t)=>{let{capValue:a}=t;return e?a&&e>a?">".concat(100*a,"%"):"".concat(Math.round(100*e),"%"):"Unknown %"};var ne=e=>{let{ratios:t,fillColors:a,textColors:r,content:n,firstSide:c=100,horizontal:_=!0,classes:s="",getInnerText:l=re,bufferRatio:i=J,textBufferRatio:d=Z,defaultRatio:u=$,capValue:h=ae,fontSizeRatio:p=Q,headerFontSizeRatio:g=ee,lineHeight:O=te}=e;const f=(e,t)=>_?t:e,m=c*(1+i),b=c*(1+d);let j=c,E=0,M=0;const x=c*p,P=c*g,D=[],I=[],C=[];o.a.each(t,((e,c)=>{const _=l(e,{capValue:h});e=e||u,h&&e>h&&(e=h);const s=a[c],i=a[c+1],d=r[c+1];D.push(Object(y.jsx)("rect",{x:f(E,M),y:f(M,E),width:j,height:j,fill:s}));const{below:p=[]}=o.a.get(n,c,{}),g=Object(y.jsxs)("text",{fontSize:x,y:f(M+x,b+x),children:[Object(y.jsx)("tspan",{className:"percent",x:f(b,M),style:{fill:d,fontSize:P},children:_}),p.map(((e,t)=>Object(y.jsx)("tspan",{className:"description",x:f(b,M),dy:x*O,children:e},c+t)))]});I.push(g);let A=j*e;const L=(j-A)/2;if(E+=L,M+=L,j=A,D.push(Object(y.jsx)("rect",{x:f(E,M),y:f(M,E),width:j,height:j,fill:i})),c===t.length-1)return;const w={strokeWidth:".4",strokeDasharray:".8 1"},v=Object(y.jsx)("line",{style:w,stroke:i,x1:f(E,M+j),x2:f(E,M+m),y1:f(M+j,E),y2:f(M+m,E)}),T=Object(y.jsx)("line",{style:w,stroke:i,x1:f(E+j,M+j),x2:f(E+j,M+m),y1:f(M+j,E+j),y2:f(M+m,E+j)});C.push(v,T),M+=m}));const A=c+(b+c),L=M+c,w=M+m,v=b+(P+5*x),T="nested-boxes "+s;return Object(y.jsx)("div",{className:T,children:Object(y.jsxs)("svg",{viewBox:"0 -2 ".concat(f(A,w)," ").concat(f(L,v)),children:[D,I,C]})})},ce=a(43),_e=a(437);const oe=e=>{let{active:t,payload:a,label:r,isArea:n}=e;if(t&&a&&a.length){const e=n?a:o.a.sortBy(a,"value");let t=null;return Object(y.jsxs)(N.a,{sx:{background:"white",p:2},className:"custom-tooltip",children:[Object(y.jsx)("strong",{className:"label",children:r}),e.reverse().map((e=>{if(e.dataKey.includes("_bounds"))return;const a=o.a.get(e.payload,e.dataKey+"_bounds",[]),r=[l.e.value_lower,l.e.value_upper].map(((t,r)=>o.a.get(e.payload,[e.dataKey+"_row","DISPLAY_".concat(t.toUpperCase())],a[r]))),n=o.a.get(e.payload,[e.dataKey+"_row",l.f.DISPLAY_VALUE],e.value);return t=t||o.a.get(e.payload,[e.dataKey+"_row",l.e.source_display])||o.a.get(e.payload,[e.dataKey+"_row",l.e.source_database]),Object(y.jsxs)(j.a,{children:[Object(y.jsx)("svg",{width:"18",viewBox:"0 0 160 100",xmlns:"http://www.w3.org/2000/svg",children:Object(y.jsx)("circle",{cx:"50",cy:"50",r:"50",fill:e.fill})}),e.name,": ",n," ",!!a.length&&"(".concat(r.join(" - "),")")]},e.dataKey)})),t&&Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("br",{}),Object(y.jsx)("u",{children:"Source"}),": ",t]})]})}return null},se=e=>{let{selectedIso:t,chartData:a,countries:r}=e;const[n,_]=c.a.useState({}),s=e=>{const{data:t,chartId:a,elements:r,type:c,isPercentage:s,colors:l,elementNameMap:i}=e,d="area"===c,[,u]=d?[w.a,v.a]:[T.a,B.a],h=s?e=>Object(ce.c)(e):e=>Object(ce.b)(e),p=e=>o.a.get(i,e,e);return Object(y.jsx)(U.a,{width:"99%",aspect:1.25,maxHeight:400,children:Object(y.jsxs)(R.a,{data:t,margin:{top:30,right:30,left:0,bottom:0},children:[Object(y.jsx)(W.a,{strokeDasharray:"3 3"}),Object(y.jsx)(K.a,{dataKey:"name"}),Object(y.jsx)(S.a,{width:80,domain:s?[0,100]:void 0,tickFormatter:h}),Object(y.jsx)(k.a,{cursor:{stroke:Object(f.c)(f.h,10),strokeWidth:1},content:Object(y.jsx)(oe,{isArea:d})}),Object(y.jsx)(F.a,{onClick:e=>{console.log(e.dataKey);const t=o.a.cloneDeep(n),r=o.a.get(t,[a,e.dataKey],!1);o.a.set(t,[a,e.dataKey],!r),_(t)},iconSize:d?8:14,iconType:d&&"circle"}),r.map(((e,r)=>!d&&o.a.some(t,(t=>o.a.get(t,[e+"_bounds"],[]).length))?Object(y.jsx)(v.a,{dataKey:e+"_bounds",hide:o.a.get(n,[a,e],!1),legendType:"none",tooltipType:"none",stroke:Object(f.c)(l[r],f.f-3),fill:Object(f.c)(l[r],f.b-3)},r+"_b"):null)),r.map(((e,t)=>Object(y.jsx)(u,{dataKey:e,name:p(e),hide:o.a.get(n,[a,e],!1),stackId:d?1:t+1e3,stroke:Object(f.c)(l[t],f.f),fill:Object(f.c)(l[t],f.b)},t)))]})})},i=e=>{const{data:t}=e,a=t[0].values.map((e=>{let{column:t,columnNamed:a}=e;return Object(y.jsx)(z.a,{scope:"col",children:a&&t},t)})),r=t.map((e=>{let{row:t,values:a}=e;return Object(y.jsxs)(X.a,{children:[Object(y.jsx)(z.a,{scope:"row",component:"th",children:t}),a.map((e=>{let{value:t,column:a,sheetRow:r}=e;return Object(y.jsx)(z.a,{children:o.a.get(r,l.f.DISPLAY_VALUE,t)||"N/A"},a)}))]},t)}));return Object(y.jsx)(U.a,{children:Object(y.jsx)(V.a,{children:Object(y.jsxs)(Y.a,{sx:{"& tbody tr:nth-of-type(odd)":{background:Object(f.c)(f.g,6)},"& td, & thead th":{textAlign:"right"}},children:[Object(y.jsx)(H.a,{children:Object(y.jsxs)(X.a,{children:[Object(y.jsx)(z.a,{scope:"col"}),a]})}),Object(y.jsx)(G.a,{children:r})]})})})},d=e=>{const t=Object(q.a)(),a=Object(_e.a)(t.breakpoints.down("sm")),{data:r,elements:n,colors:c,elementNameMap:_}=(Object(_e.a)(t.breakpoints.up("md")),e),o=n.map((e=>{const t=r[e];return t&&t/100})),s=n.map((e=>({below:_[e].split(l.h)})));return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(ne,{title:"title",bufferRatio:a?.2:.8,lineHeight:a?1.1:1.4,textBufferRatio:.2,firstSide:20,horizontal:!a,ratios:o,fillColors:c.map((e=>Object(f.c)(e,8))),textColors:c.map((e=>Object(f.c)(e,9))),content:s}),Object(y.jsx)("br",{})]})},u=e=>{const a=r.find((e=>e.iso===t));return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(j.a,{variant:"h2",component:"h1",sx:{fontWeight:500,lineHeight:1,fontSize:{lg:"6rem"},maxWidth:{lg:760,xl:"100%"},mb:{sm:1,lg:2}},children:a&&a.name}),Object(y.jsx)(N.a,{sx:{display:{sm:"flex"},"& dl:not(:last-child)":{mr:{sm:4,md:10}},"& dt h2":{fontWeight:100,letterSpacing:".8px",textTransform:"uppercase"},"& dt, dd":{m:0}},children:e.elements.map((t=>Object(y.jsxs)("dl",{children:[Object(y.jsx)("dt",{children:Object(y.jsx)(j.a,{variant:"h6",component:"h2",children:o.a.get(e,["textValues","".concat(t,"_row"),l.f.DISPLAY_NAME],"")})}),Object(y.jsx)("dd",{children:Object(y.jsx)(j.a,{variant:"h4",component:"h2",children:o.a.get(e,["textValues","".concat(t,"_row"),l.f.DISPLAY_VALUE],e.textValues[t])})})]},t)))})]})};return Object(y.jsx)(N.a,{display:"flex",flexWrap:"wrap",pt:8,sx:{justifyContent:{xs:"space-evenly",md:"space-between"}},children:a.map((e=>{if(!e)return null;const{type:t,chartId:a,name:r}=e;return"intro"===a?Object(y.jsx)(N.a,{sx:{flexBasis:{xs:"100%",xl:600},flexGrow:{xl:0},p:3},children:u(e)},a):"table"===t?Object(y.jsxs)(N.a,{sx:{flexBasis:"100%",maxWidth:864,p:3},children:[Object(y.jsx)(j.a,{variant:"h5",component:"h3",children:r}),i(e)]},a):"nested"===t?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)(N.a,{sx:{flexBasis:{xs:"100%",xl:700},flexGrow:{xl:1},flexShrink:{xl:1},mr:"auto",ml:{xl:"auto"},maxWidth:864,p:3},children:[Object(y.jsx)(j.a,{pb:3,variant:"h5",component:"h3",children:r}),d(e)]},a),Object(y.jsx)(N.a,{sx:{flexBasis:"100%",height:0}})]}):Object(y.jsxs)(N.a,{sx:{width:"100%",maxWidth:{md:"44%",xl:"29%"},p:3},children:[Object(y.jsx)(j.a,{variant:"h5",component:"h3",children:r}),s(e)]},a)}))})},le=e=>{let{homeCopy:t}=e;if(!t||!t.length)return null;const a=Object.keys(t[0]).filter((e=>e.startsWith(l.a.TAP)));return Object(y.jsxs)(M.a,{pt:"72px",px:3,children:[Object(y.jsx)(M.a,{children:t.map(((e,t)=>!!e[l.a.blurb]&&Object(y.jsx)(j.a,{variant:"body1",sx:{fontSize:{sm:"smaller",md:"unset"}},pt:1,dangerouslySetInnerHTML:{__html:e[l.a.blurb]}},t)))}),Object(y.jsxs)(M.a,{py:5,className:"tap-lists-container",children:[Object(y.jsx)(j.a,{variant:"h6",component:"h2",dangerouslySetInnerHTML:{__html:"Technical Assistance Providers"}}),Object(y.jsx)(M.a,{className:"tap-lists",sx:{display:{sm:"flex"}},children:a.map((e=>(e=>Object(y.jsxs)(M.a,{sx:{background:"#f2c2b4",p:1,m:1,borderRadius:"8px",height:"100%"},children:[Object(y.jsx)(j.a,{variant:"body1",sx:{fontSize:{sm:"smaller",md:"unset"}},variant:"h7",component:"h3",dangerouslySetInnerHTML:{__html:e.replace(l.a.TAP,"")}}),Object(y.jsx)("ul",{style:{paddingInlineStart:"20px"},children:t.map(((t,a)=>!!t[e]&&Object(y.jsx)("li",{children:Object(y.jsx)(j.a,{variant:"body1",sx:{fontSize:{sm:"smaller",md:"unset"}},dangerouslySetInnerHTML:{__html:t[e]}},a)})))})]},e))(e)))})]})]})},ie=e=>{let{dictionary:t}=e;const a=Object(m.a)();return Object(y.jsxs)(M.a,{sx:{px:{xs:3,lg:10},mx:{lg:5},mb:{lg:5},py:9,mt:9,background:a.palette.background.paper,"& dl":{display:"inline-block",width:"100%",mt:0,mb:{lg:3},fontSize:15},"& dd":{ml:0,mt:{xs:1},fontSize:13}},children:[Object(y.jsx)(j.a,{variant:"h6",component:"h2",dangerouslySetInnerHTML:{__html:"Glossary"}}),Object(y.jsx)(M.a,{sx:{columnCount:{md:2,xl:3},columnGap:{xs:"2rem",lg:"5rem"},mt:3},children:t.sort(((e,t)=>e.term.toLowerCase()>t.term.toLowerCase())).map((e=>{let{term:t,definition:a}=e;return Object(y.jsxs)("dl",{children:[Object(y.jsx)("dt",{children:Object(y.jsx)("strong",{children:t})}),Object(y.jsx)("dd",{children:Object(y.jsx)(j.a,{dangerouslySetInnerHTML:{__html:Object(ce.d)(a)}})})]})}))})]})};function de(){const[e,t]=c.a.useState(null),[a,r]=c.a.useState([]),[n,_]=c.a.useState([]),[s,l]=c.a.useState([]),[i,d]=c.a.useState([]),[h,p]=c.a.useState([]),[g,E]=c.a.useState(null);c.a.useEffect((()=>{O().then((e=>{_(e.dictionary.filter((e=>e.term&&e.definition))),l(e.countries.filter((e=>e.iso&&e.name))),d(e.homecopy),p(e.chartIds),E(e.chartConfigsMap)}))}),[]),c.a.useEffect((()=>{e&&async function(e){let{chartConfigsMap:t,chartIds:a,selectedIso:r}=e;return{charts:await u({chartConfigsMap:t,chartIds:a,selectedIso:r}).catch((e=>{console.error("error in getCharts(selectedIso): ",e)}))}}({chartConfigsMap:g,chartIds:h,selectedIso:e}).then((e=>{console.log("@@@ ALL DATA: "),console.log(e.charts),r(e.charts)}))}),[e]);const M=!o.a.some(a,(t=>t&&t.countryIso===e)),x=Object(m.a)();return Object(y.jsxs)(b.a,{elevation:0,sx:{background:Object(f.c)(f.g,3),color:Object(f.c)(f.g,12),fontFamily:x.typography.fontFamily,p:{lg:6}},children:[Object(y.jsx)(L,{countries:s,handleCountryChange:e=>{const a=e.target.value,r=o.a.some(s,(e=>{let{iso:t}=e;return t===a}));t(r?a:null)},selectedIso:e}),Object(y.jsx)("br",{}),e?M?Object(y.jsx)(N.a,{pt:"50vh",children:Object(y.jsx)(j.a,{variant:"body1",sx:{textAlign:"center"},dangerouslySetInnerHTML:{__html:"loading..."}})}):Object(y.jsx)(se,{countries:s,selectedIso:e,chartData:a}):Object(y.jsx)(le,{homeCopy:i}),!!n.length&&!M&&Object(y.jsx)(ie,{dictionary:n}),false]})}var ue=a(170),he=a(446);const pe=Object(ue.a)({palette:{primary:{main:Object(f.c)(f.g,11)},secondary:{main:Object(f.c)(f.h,8)}},typography:{fontFamily:["Archivo","sans-serif"].join(",")}});function ge(){return Object(y.jsx)(he.a,{theme:pe,children:Object(y.jsx)(de,{})})}const Oe=document.getElementById("root");Object(r.render)(Object(y.jsx)(ge,{}),Oe)},43:function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"c",(function(){return _})),a.d(t,"b",(function(){return o})),a.d(t,"d",(function(){return s}));var r=a(6),n=a.n(r);const c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=Number(e),t.cap?Math.min(e,Number(t.cap)):e},_=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e=Number(e),!isFinite(e))return"NA";if(t.cap&&e>Number(t.cap)){return">".concat(t.cap,"%")}e>100&&console.warn("Incorrect %");const a=t.decimals||0;return n.a.round(e,a).toString()+"%"},o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e=Number(e),t.coarseFormatting){if(e>1e9)return n.a.round(e/1e9,1).toString()+" billion";if(e>1e6)return n.a.round(e/1e6,1).toString()+" million";if(e<100)return"<100";if(e<200)return"<200";if(e<500)return"<500";if(e<1e3)return"<1000";e=Number(e.toPrecision(2))}return e.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1 ")},s=e=>e.replaceAll("<a ","<a target='_blank' rel='noopener noreferrer'")},8:function(e,t,a){"use strict";a.d(t,"i",(function(){return r})),a.d(t,"j",(function(){return n})),a.d(t,"h",(function(){return c})),a.d(t,"b",(function(){return _})),a.d(t,"c",(function(){return o})),a.d(t,"g",(function(){return s})),a.d(t,"d",(function(){return l})),a.d(t,"e",(function(){return i})),a.d(t,"a",(function(){return d})),a.d(t,"f",(function(){return u}));const r=!0,n="__",c="__",_=["dictionary","countries","homecopy"],o=["configs",..._],s={home:"0"},l={chartId:"chart_id",sourceGid:"source_gid",element:"element",displayName:"display_name",capPercentage:"cap_percentage",percentageDecimals:"percentage_decimals",coarseIntegerFormatting:"coarse_integer_formatting",colorOverride:"color_override",chartType:"chart_type",modelled:"modelled",formula:"formula",hidden:"hidden",valueField:"value_field",percentage:"percentage"},i={country_iso_code:"country_iso_code",sourceYear:"source_year",value:"value",year:"year",indicator:"indicator",indicator_description:"indicator_description",sex:"sex",age:"age",population_segment:"population_segment",population_sub_group:"population_sub_group",country_name:"country_name",area_name:"area_name",geographic_scope:"geographic_scope",value_upper:"value_upper",value_lower:"value_lower",value_comment:"value_comment",unit_format:"unit_format",source_organization:"source_organization",source_database:"source_database",source_display:"source_display",notes:"notes",modality:"modality",modality_category:"modality_category",import_file:"import_file",import_timestamp:"import_timestamp",row_id:"row_id",suppressed:"suppressed"},d={term:"term",definition:"definition",iso:"iso",name:"name",blurb:"blurb",TAP:"_TAP_"},u={DISPLAY_NAME:"DISPLAY_NAME",DISPLAY_VALUE:"DISPLAY_VALUE",DISPLAY_VALUE_LOWER:"DISPLAY_".concat(i.value_lower.toUpperCase()),DISPLAY_VALUE_UPPER:"DISPLAY_".concat(i.value_upper.toUpperCase())}}},[[379,1,2]]]);
//# sourceMappingURL=main.74d47395.chunk.js.map