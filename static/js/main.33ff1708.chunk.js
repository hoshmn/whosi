(this.webpackJsonpwhosi=this.webpackJsonpwhosi||[]).push([[0],{25:function(e,t,a){"use strict";a.d(t,"g",(function(){return r})),a.d(t,"h",(function(){return _})),a.d(t,"d",(function(){return c})),a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return s})),a.d(t,"f",(function(){return l})),a.d(t,"e",(function(){return i})),a.d(t,"c",(function(){return d}));var n=a(20);const r=n.v,_=n.k,c=n.g,o=[[n.p,n.h,n.r],[n.z,n.k,n.g],[n.w,n.d,n.A,n.v]],s=8,l=11,i=[n.z,n.t,n.e,n.q,n.r,n.s,n.A,n.k,n.b,n.f,n.y,n.j,n.h,n.p,n.d,n.w,n.n,n.l,n.B,n.a,n.i,n.m,n.x,n.u,n.o,n.v,n.g,n.c],d=(e,t)=>{if("string"===typeof e)return e;return e[Object.keys(e)[0].replace(/\d/,"")+t]}},31:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"l",(function(){return getUrl})),__webpack_require__.d(__webpack_exports__,"a",(function(){return configParser})),__webpack_require__.d(__webpack_exports__,"b",(function(){return filterByCountryGenerator})),__webpack_require__.d(__webpack_exports__,"g",(function(){return getElements})),__webpack_require__.d(__webpack_exports__,"k",(function(){return getSetting})),__webpack_require__.d(__webpack_exports__,"h",(function(){return getField})),__webpack_require__.d(__webpack_exports__,"i",(function(){return getFieldBoolean})),__webpack_require__.d(__webpack_exports__,"j",(function(){return getFormula})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getBounds})),__webpack_require__.d(__webpack_exports__,"e",(function(){return getColors})),__webpack_require__.d(__webpack_exports__,"m",(function(){return transformYearRange})),__webpack_require__.d(__webpack_exports__,"f",(function(){return getDataPoint})),__webpack_require__.d(__webpack_exports__,"d",(function(){return getCalculatedDataPoint}));var lodash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5),lodash__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__),_consts_colors__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(25),_consts_data__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(4),_display__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(39);const SPECIAL_FILTERS_MAP={_NONE_:lodash__WEBPACK_IMPORTED_MODULE_0___default.a.negate(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.identity),_SOMETHING_:lodash__WEBPACK_IMPORTED_MODULE_0___default.a.identity,_ANY_:lodash__WEBPACK_IMPORTED_MODULE_0___default.a.stubTrue},defaultCompFn=(e,t)=>e.toLowerCase()===t.toLowerCase(),getUrl=e=>"https://docs.google.com/spreadsheets/d/e/2PACX-1vSAEOXOt5aHDcb35lpCsSO5AvHTZPplXHrHGaIXTJjCtW_B96D0MOItWZLGv1j4lagTxnuVClms6M0X/pub?gid=".concat(e,"&single=true&output=csv"),configParser=e=>{if(e[_consts_data__WEBPACK_IMPORTED_MODULE_2__.d.chartId])return delete e[""],lodash__WEBPACK_IMPORTED_MODULE_0___default.a.each(e,((t,a)=>{""===t&&delete e[a]})),e},filterByCountryGenerator=e=>t=>t[_consts_data__WEBPACK_IMPORTED_MODULE_2__.e.country_iso_code]===e?t:null,getElements=e=>Object.keys(e).filter((e=>e!==_consts_data__WEBPACK_IMPORTED_MODULE_2__.j.all&&!e.startsWith(_consts_data__WEBPACK_IMPORTED_MODULE_2__.j._key_))),getSetting=e=>{let{element:t=_consts_data__WEBPACK_IMPORTED_MODULE_2__.j.all,chartConfigsMap:a,field:n,chartId:r=_consts_data__WEBPACK_IMPORTED_MODULE_2__.j.all}=e;return lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(a,[r,t,0,n])||lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(a,[r,_consts_data__WEBPACK_IMPORTED_MODULE_2__.j.all,0,n])||lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(a,[_consts_data__WEBPACK_IMPORTED_MODULE_2__.j.all,0,n])},getField=e=>{let{element:t=_consts_data__WEBPACK_IMPORTED_MODULE_2__.j.all,chartConfig:a,field:n}=e;return lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(a,[t,0,n])},getFieldBoolean=e=>{let{element:t=_consts_data__WEBPACK_IMPORTED_MODULE_2__.j.all,chartConfig:a,field:n}=e;return!!getField({element:t,chartConfig:a,field:n})},getFormula=e=>{let{element:t,chartConfig:a}=e;return getField({element:t,chartConfig:a,field:_consts_data__WEBPACK_IMPORTED_MODULE_2__.d.formula})},getBounds=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{[_consts_data__WEBPACK_IMPORTED_MODULE_2__.e.value_lower]:t,[_consts_data__WEBPACK_IMPORTED_MODULE_2__.e.value_upper]:a}=e;if(parseFloat(t)&&parseFloat(a))return[parseFloat(t),parseFloat(a)]},getColors=e=>{let{chartSettings:t,chartConfig:a,chartElements:n}=e,r=parseInt(Math.abs(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(t,_consts_data__WEBPACK_IMPORTED_MODULE_2__.d.colorOverride)));r=((r||1)-1)%_consts_colors__WEBPACK_IMPORTED_MODULE_1__.a.length;const _=_consts_colors__WEBPACK_IMPORTED_MODULE_1__.a[r],c=n.map(((e,t)=>getField({chartConfig:a,element:e,field:_consts_data__WEBPACK_IMPORTED_MODULE_2__.d.colorOverride})||_[t%_.length]));return"nested"===lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(t,_consts_data__WEBPACK_IMPORTED_MODULE_2__.d.chartType)&&c.push(_[n.length%_.length]),c},transformYearRange=e=>{const t=/\[(\d+)-(\d+)\]/.exec(e);if(!t||!t.length>1)return[];const a=parseInt(t[1]),n=parseInt(t[2]);return lodash__WEBPACK_IMPORTED_MODULE_0___default.a.range(a,n+1).map(String)},getFilter=e=>{let{chartId:t,element:a,year:n=null,selectedIso:r,chartConfigsMap:_}=e;const c=lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(_,[_consts_data__WEBPACK_IMPORTED_MODULE_2__.j.all,0],{}),o=lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(_,[t,_consts_data__WEBPACK_IMPORTED_MODULE_2__.j.all,0],{}),[s,...l]=lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(_,[t,a],[{}]),i={...c,...o,...s,selectedIso:r};return n&&(i.year=n),i},getRow=e=>{let{filter:t,chartSourceData:a}=e;const n=lodash__WEBPACK_IMPORTED_MODULE_0___default.a.filter(a,(e=>lodash__WEBPACK_IMPORTED_MODULE_0___default.a.every(t,((t,a)=>{if(!_consts_data__WEBPACK_IMPORTED_MODULE_2__.e[a])return!0;const n=e[a]||"";return!!(SPECIAL_FILTERS_MAP[t]||defaultCompFn)(n,t)}))));return lodash__WEBPACK_IMPORTED_MODULE_0___default.a.maxBy(n,(e=>Number(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(e,_consts_data__WEBPACK_IMPORTED_MODULE_2__.e.year,0))+Number(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(e,_consts_data__WEBPACK_IMPORTED_MODULE_2__.e.sourceYear,0))/1e4))},getDataPoint=e=>{let{chartId:t,element:a,year:n=null,selectedIso:r,chartConfigsMap:_,chartSourceData:c}=e;const o=getFilter({chartId:t,element:a,year:n,selectedIso:r,chartConfigsMap:_,chartSourceData:c}),s=getRow({filter:o,chartSourceData:c}),l=lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(o,_consts_data__WEBPACK_IMPORTED_MODULE_2__.d.valueField,_consts_data__WEBPACK_IMPORTED_MODULE_2__.e.value);let i=lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(s,l,null);if(!s||!i)return{};const d=getField({element:a,chartConfig:_[t],field:_consts_data__WEBPACK_IMPORTED_MODULE_2__.d.displayName});return d&&lodash__WEBPACK_IMPORTED_MODULE_0___default.a.set(s,_consts_data__WEBPACK_IMPORTED_MODULE_2__.f.DISPLAY_NAME,d),l&&l!==_consts_data__WEBPACK_IMPORTED_MODULE_2__.e.value?{row:s,value:i}:capAndFormat({row:s,value:i,chartConfigsMap:_,chartId:t,element:a})},capAndFormat=e=>{let{row:t,value:a,chartConfigsMap:n,chartId:r,element:_}=e,c=a;if(getFieldBoolean({chartConfig:n[r],field:_consts_data__WEBPACK_IMPORTED_MODULE_2__.d.percentage})){const e={cap:getSetting({chartConfigsMap:n,chartId:r,element:_,field:_consts_data__WEBPACK_IMPORTED_MODULE_2__.d.capPercentage}),decimals:getSetting({chartConfigsMap:n,chartId:r,element:_,field:_consts_data__WEBPACK_IMPORTED_MODULE_2__.d.percentageDecimals})};c=Object(_display__WEBPACK_IMPORTED_MODULE_3__.c)(a,e),a=Object(_display__WEBPACK_IMPORTED_MODULE_3__.a)(a,e),_display__WEBPACK_IMPORTED_MODULE_3__.a&&lodash__WEBPACK_IMPORTED_MODULE_0___default.a.set(t,_consts_data__WEBPACK_IMPORTED_MODULE_2__.e.value,a),[_consts_data__WEBPACK_IMPORTED_MODULE_2__.e.value_lower,_consts_data__WEBPACK_IMPORTED_MODULE_2__.e.value_upper].forEach((a=>{const n=lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(t,a);n&&lodash__WEBPACK_IMPORTED_MODULE_0___default.a.set(t,"DISPLAY_".concat(a.toUpperCase()),Object(_display__WEBPACK_IMPORTED_MODULE_3__.c)(n,e));const r=n&&Object(_display__WEBPACK_IMPORTED_MODULE_3__.a)(n,e);r&&lodash__WEBPACK_IMPORTED_MODULE_0___default.a.set(t,a,r)}))}else{const e=!!getSetting({chartConfigsMap:n,chartId:r,element:_,field:_consts_data__WEBPACK_IMPORTED_MODULE_2__.d.coarseIntegerFormatting});c=Object(_display__WEBPACK_IMPORTED_MODULE_3__.b)(a,{coarseFormatting:e}),[_consts_data__WEBPACK_IMPORTED_MODULE_2__.e.value_lower,_consts_data__WEBPACK_IMPORTED_MODULE_2__.e.value_upper].forEach((e=>{let a=lodash__WEBPACK_IMPORTED_MODULE_0___default.a.get(t,e);a&&lodash__WEBPACK_IMPORTED_MODULE_0___default.a.set(t,"DISPLAY_".concat(e.toUpperCase()),Object(_display__WEBPACK_IMPORTED_MODULE_3__.b)(a))}))}return c&&lodash__WEBPACK_IMPORTED_MODULE_0___default.a.set(t,_consts_data__WEBPACK_IMPORTED_MODULE_2__.f.DISPLAY_VALUE,c),{row:t,value:a}},getCalculatedDataPoint=_ref10=>{let{chartConfigsMap:chartConfigsMap,element:element,dataPoints:dataPoints,chartId:chartId}=_ref10;const chartConfig=chartConfigsMap[chartId],rawFormula=getFormula({element:element,chartConfig:chartConfig});let convertedFormula=rawFormula;lodash__WEBPACK_IMPORTED_MODULE_0___default.a.each(dataPoints,((e,t)=>{convertedFormula=convertedFormula.replace(t,e)}));let result=null;try{result=eval(convertedFormula)}catch(error){return console.warn("cannot evaluate ".concat(rawFormula," (").concat(convertedFormula,")")),{value:null}}if(!/^[\d-+*\/\.]+$/.test(convertedFormula)||!lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isNumber(result))return console.warn("missing values for ".concat(rawFormula," (").concat(convertedFormula,")")),{value:null};const displayName=getField({element:element,chartConfig:chartConfig,field:_consts_data__WEBPACK_IMPORTED_MODULE_2__.d.displayName})||element;return capAndFormat({value:result,row:{[_consts_data__WEBPACK_IMPORTED_MODULE_2__.f.DISPLAY_NAME]:displayName},chartConfigsMap:chartConfigsMap,chartId:chartId,element:element})}},382:function(e,t,a){"use strict";a.r(t);var n=a(45),r=a(0),_=a.n(r),c=a(5),o=a.n(c),s=a(436),l=a(4),i=a(31);const d=o.a.memoize((async function(e){return e?await Object(s.a)(Object(i.l)(e)).catch((e=>{console.error("error in getChartOrTable()): ",e)})):null}));async function u(e){let{chartConfigsMap:t,chartIds:a,selectedIso:n}=e;return await Promise.all(a.map((e=>e.startsWith(l.j._page_element_)?async function(e){let{chartConfigsMap:t,chartId:a}=e;const n=t[a],r=o.a.get(n,[l.j.all,0]),_=o.a.get(r,l.d.displayName),c=a.replace(l.j._page_element_,""),s=c.startsWith("link")?"link":c.startsWith("accordion")?"accordion":null;return{elementId:c,text:_,type:s}}({chartConfigsMap:t,chartId:e,selectedIso:n}):async function(e){let{chartConfigsMap:t,chartId:a,selectedIso:n}=e;if([].includes(a))return;const r=t[a],_=o.a.get(r,[l.j.all,0]);if(!r||!_||!_[l.d.sourceGid])return console.warn("skipping chart: ",a),null;const c=await async function(e,t){return(await d(e)).filter((e=>Object(i.b)(t)(e)))}(_[l.d.sourceGid],n),s={table:g,table_list:p,text:h};return o.a.get(s,_[l.d.chartType],O)({chartId:a,chartSettings:_,chartConfigsMap:t,chartSourceData:c,selectedIso:n})}({chartConfigsMap:t,chartId:e,selectedIso:n})))).catch((e=>{console.error("error in getCharts(): ",e)}))}function h(e){let{chartId:t,chartSettings:a,chartConfigsMap:n,chartSourceData:r,selectedIso:_}=e;const c=Object(i.g)(n[t]),s={};return o.a.each(c,(e=>{const{row:a,value:c}=Object(i.f)({chartId:t,element:e,selectedIso:_,chartConfigsMap:n,chartSourceData:r});s[e]=c,s["".concat(e,"_row")]=a})),{textValues:s,chartId:t,countryIso:_,elements:c,type:o.a.get(a,l.d.chartType),name:o.a.get(a,l.d.displayName,t),hiddenUntilExpand:o.a.get(a,l.d.hiddenUntilExpand)}}function p(e){let{chartId:t,chartSettings:a,chartConfigsMap:n,chartSourceData:r,selectedIso:_}=e;const c=n[t],s=o.a.get(c,[l.j.all,0]),i=Object.keys(s).filter((e=>!!l.e[e]||o.a.some(l.e.REGEX,(t=>!!t.test(e)))));let d={};try{d=Object.keys(c).filter((e=>e.startsWith("".concat(l.j._key_).concat(l.j._color_by_)))).reduce(((e,t)=>{const a=t.replace("".concat(l.j._key_).concat(l.j._color_by_),""),[n,r]=a.split("__"),_=o.a.get(c,[t,0,l.d.displayName]);return _&&o.a.set(e,[n,r],_),e}),{})}catch(u){console.warn("color mapping entered incorrectly for ".concat(t,", ignoring. ").concat(u))}return{data:r.map(((e,t)=>({rowName:t,values:i.map((t=>{const a=o.a.get(e,t),n=a&&a.toLowerCase();let r=o.a.get(s,t,"");r=r.includes(l.j._color_by_)&&r.replace(l.j._color_by_,"");return{columnName:t,columnNamed:!0,value:a,color:o.a.get(d,[r,n]),sheetRow:e}}))}))),chartId:t,countryIso:_,hideRowNames:!0,type:o.a.get(a,l.d.chartType),name:o.a.get(a,l.d.displayName,t),hiddenUntilExpand:o.a.get(a,l.d.hiddenUntilExpand)}}function g(e){let{chartId:t,chartSettings:a,chartConfigsMap:n,chartSourceData:r,selectedIso:_}=e;const c=n[t],s=Object(i.g)(c),d={},u=Object(i.i)({chartConfig:c,field:l.d.percentage});o.a.each(s,(e=>{const{row:a,value:c}=Object(i.f)({chartId:t,element:e,selectedIso:_,chartConfigsMap:n,chartSourceData:r});d[e]=c,d[e+"_row"]=a}));const h=o.a.uniq(s.map((e=>e.split(l.k)[0]))),p=o.a.uniq(s.map((e=>e.split(l.k)[1])));return{data:h.map((e=>({rowName:o.a.get(c,["".concat(l.j._key_).concat(e),0,l.d.displayName],e),values:p.map((t=>({columnName:o.a.get(c,["".concat(l.j._key_).concat(t),0,l.d.displayName],t),columnNamed:o.a.get(c,["".concat(l.j._key_).concat(t),0,l.d.displayName],!1),value:o.a.get(d,"".concat(e).concat(l.k).concat(t)),sheetRow:o.a.get(d,"".concat(e).concat(l.k).concat(t,"_row"))})))}))),chartId:t,countryIso:_,elements:s,isPercentage:u,type:o.a.get(a,l.d.chartType),name:o.a.get(a,l.d.displayName,t),hiddenUntilExpand:o.a.get(a,l.d.hiddenUntilExpand)}}function O(e){let{chartId:t,chartSettings:a,chartConfigsMap:n,chartSourceData:r,selectedIso:_}=e;const c=n[t],s=Object(i.g)(c),d=s.filter((e=>!Object(i.i)({element:e,chartConfig:c,field:l.d.hidden}))),u=o.a.get(c,[l.j.all,0,l.e.year]),h=u,p=h?Object(i.m)(u):[l.j.all],g=o.a.map(p,(e=>{const a={};return o.a.each(s,(o=>{if(Object(i.j)({element:o,chartConfig:c}))return null;const{row:s,value:l}=Object(i.f)({chartId:t,element:o,year:h?e:null,selectedIso:_,chartConfigsMap:n,chartSourceData:r});a[o]=l,a[o+"_row"]=s,a[o+"_bounds"]=Object(i.c)(s)})),o.a.each(s,(e=>{if(!Object(i.j)({element:e,chartConfig:c}))return null;const{row:r,value:_}=Object(i.d)({chartId:t,element:e,chartConfigsMap:n,dataPoints:a});a[e]=_,a[e+"_row"]=r})),o.a.each(s,(e=>{Object(i.i)({element:e,chartConfig:c,field:l.d.hidden})&&delete a[e]})),a.name=e,a})),O={};o.a.each(d,(e=>O[e]=Object(i.h)({element:e,chartConfig:n[t],field:l.d.displayName})));const m=Object(i.e)({chartSettings:a,chartConfig:c,chartElements:d});return{data:h?g:g[0],chartId:t,countryIso:_,elements:d,elementNameMap:O,colors:m,isPercentage:Object(i.i)({chartConfig:c,field:l.d.percentage}),type:o.a.get(a,l.d.chartType),name:o.a.get(a,l.d.displayName,t),hiddenUntilExpand:o.a.get(a,l.d.hiddenUntilExpand)}}async function m(){await async function(){if(l.c.every((e=>!!l.g[e])))return;const e=await Object(s.a)(Object(i.l)(l.g.home)).catch((e=>{console.error("error in csv(getUrl(GID_MAP.home)): ",e)}));l.c.forEach((t=>{const a=o.a.findLast(e,(e=>!!e[t]));a?l.g[t]=a[t]:console.error("No Sheet GID found for: ",t)}))}().catch((e=>{console.error("error in setConfigGids(): ",e)}));const e=(await Promise.all(l.b.map((e=>Object(s.a)(Object(i.l)(l.g[e])).catch((t=>console.error("error getting ".concat(e,": "),t))))))).reduce(((e,t,a)=>(e[l.b[a]]=t,e)),{}),{chartConfigsMap:t,chartIds:a}=await async function(){const e=await Object(s.a)(Object(i.l)(l.g.configs),i.a).catch((e=>{console.error("error in csv(getUrl(GID_MAP.configs), configParser): ",e)})),t=o.a.groupBy(e,l.d.chartId),a=o.a.uniqBy(e,"chart_id").map((e=>e.chart_id)).filter((e=>e!==l.j.all)),n=o.a.mapValues(t,((e,t)=>t===l.j.all?e:o.a.groupBy(e,l.d.element)));return o.a.each(n,((e,t)=>{t!==l.j.all&&o.a.each(e,((e,t)=>{l.j.all}))})),{chartConfigsMap:n,chartIds:a}}().catch((e=>console.error("error in getChartConfigs(): ",e)));if(console.log("@@@ ALL CONFIGS: "),console.log(t),l.i){o.a.map(t,((e,a)=>Object(i.k)({chartConfigsMap:t,chartId:a,field:l.d.sourceGid}))).forEach(d)}return{...e,chartConfigsMap:t,chartIds:a}}var f=a(25),j=a(74),E=a(444),b=a(447),x=a(445),M=a(424),P=a(446),D=a(440),I=a(441),y=a(433),C=a(437),A=a(1);const L=e=>{let{handleCountryChange:t,selectedIso:a,countries:n}=e;return Object(A.jsxs)(D.a,{sx:{width:300,marginTop:1,marginBottom:1},children:[Object(A.jsx)(I.a,{id:"country",children:"Country"}),Object(A.jsxs)(y.a,{labelId:"country",id:"country-select",value:a||"home",label:"Country",onChange:t,children:[Object(A.jsx)(C.a,{value:"home",children:n.length?"Select a country...":"Loading..."}),n.map((e=>{let{iso:t,name:a}=e;return Object(A.jsx)(C.a,{value:t,children:a},t)}))]})]})},w=e=>{let{selectedIso:t,handleCountryChange:a,countries:n}=e;return Object(A.jsx)(M.a,{sx:{flexGrow:1},children:Object(A.jsx)(x.a,{position:"fixed",sx:{background:Object(f.c)(f.d,7)},children:Object(A.jsx)(P.a,{children:Object(A.jsx)(L,{countries:n,handleCountryChange:a,selectedIso:t})})})})};var T=a(426),U=a(129),v=a(430),B=a(130),R=a(438),W=a(439),K=a(431),k=a(91),S=a(92),N=a(140),F=a(111),q=a(425),Y=a(75);const G=.2,z=.1,H=.7,V=.1,X=.16,J=1.1,Z=null,$=(e,t)=>{let{capValue:a}=t;return e?a&&e>a?">".concat(100*a,"%"):"".concat(Math.round(100*e),"%"):"Unknown %"};var Q=e=>{let{ratios:t,fillColors:a,textColors:n,content:r,firstSide:_=100,horizontal:c=!0,classes:s="",getInnerText:l=$,bufferRatio:i=G,textBufferRatio:d=z,defaultRatio:u=H,capValue:h=Z,fontSizeRatio:p=V,headerFontSizeRatio:g=X,lineHeight:O=J}=e;const m=(e,t)=>c?t:e,f=_*(1+i),j=_*(1+d);let E=_,b=0,x=0;const M=_*p,P=_*g,D=[],I=[],y=[];o.a.each(t,((e,_)=>{const c=l(e,{capValue:h});e=e||u,h&&e>h&&(e=h);const s=a[_],i=a[_+1],d=n[_+1];D.push(Object(A.jsx)("rect",{x:m(b,x),y:m(x,b),width:E,height:E,fill:s},"rect1-"+_));const{below:p=[]}=o.a.get(r,_,{}),g=Object(A.jsxs)("text",{fontSize:M,y:m(x+M,j+M),children:[Object(A.jsx)("tspan",{className:"percent",x:m(j,x),style:{fill:d,fontSize:P},children:c}),p.map(((e,t)=>Object(A.jsx)("tspan",{className:"description",x:m(j,x),dy:M*O,children:e},_+t)))]},"text-"+_);I.push(g);let C=E*e;const L=(E-C)/2;if(b+=L,x+=L,E=C,D.push(Object(A.jsx)("rect",{x:m(b,x),y:m(x,b),width:E,height:E,fill:i},"rect2-"+_)),_===t.length-1)return;const w={strokeWidth:".4",strokeDasharray:".8 1"},T=Object(A.jsx)("line",{style:w,stroke:i,x1:m(b,x+E),x2:m(b,x+f),y1:m(x+E,b),y2:m(x+f,b)},"line1-"+_),U=Object(A.jsx)("line",{style:w,stroke:i,x1:m(b+E,x+E),x2:m(b+E,x+f),y1:m(x+E,b+E),y2:m(x+f,b+E)},"line2-"+_);y.push(T,U),x+=f}));const C=_+(j+_),L=x+_,w=x+f,T=j+(P+5*M),U="nested-boxes "+s;return Object(A.jsx)("div",{className:U,children:Object(A.jsxs)("svg",{viewBox:"0 -2 ".concat(m(C,w)," ").concat(m(L,T)),children:[D,I,y]})})},ee=a(39),te=a(448),ae=a(449),ne=a(450),re=a(451),_e=a(452),ce=a(453),oe=a(432),se=a(442),le=a(454);const ie=e=>{let{active:t,payload:a,label:n,isArea:r}=e;if(t&&a&&a.length){const e=r?a:o.a.sortBy(a,"value");let t=null;return Object(A.jsxs)(q.a,{sx:{background:"white",p:2},className:"custom-tooltip",children:[Object(A.jsx)("strong",{className:"label",children:n}),e.reverse().map((e=>{if(e.dataKey.includes("_bounds"))return;const a=o.a.get(e.payload,e.dataKey+"_bounds",[]),n=[l.e.value_lower,l.e.value_upper].map(((t,n)=>o.a.get(e.payload,[e.dataKey+"_row","DISPLAY_".concat(t.toUpperCase())],a[n]))),r=o.a.get(e.payload,[e.dataKey+"_row",l.f.DISPLAY_VALUE],e.value);return t=t||o.a.get(e.payload,[e.dataKey+"_row",l.e.source_display])||o.a.get(e.payload,[e.dataKey+"_row",l.e.source_database]),Object(A.jsxs)(b.a,{children:[Object(A.jsx)("svg",{width:"18",viewBox:"0 0 160 100",xmlns:"http://www.w3.org/2000/svg",children:Object(A.jsx)("circle",{cx:"50",cy:"50",r:"50",fill:e.fill})}),e.name,": ",r," ",!!a.length&&"(".concat(n.join(" - "),")")]},e.dataKey)})),t&&Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("br",{}),Object(A.jsx)("u",{children:"Source"}),": ",t]})]})}return null},de=e=>{let{selectedIso:t,chartData:a,countries:n,dashExpanded:r,toggleDashExpanded:c}=e;const[s,i]=_.a.useState({}),d=e=>{const{data:t,chartId:a,elements:n,type:r,isPercentage:_,colors:c,elementNameMap:l}=e,d="area"===r,[,u]=d?[T.a,U.a]:[v.a,B.a],h=_?e=>Object(ee.c)(e):e=>Object(ee.b)(e),p=e=>o.a.get(l,e,e);return Object(A.jsx)(R.a,{width:"99%",aspect:1.25,maxHeight:400,children:Object(A.jsxs)(W.a,{data:t,margin:{top:30,right:30,left:0,bottom:0},children:[Object(A.jsx)(K.a,{strokeDasharray:"3 3"}),Object(A.jsx)(k.a,{dataKey:"name"}),Object(A.jsx)(S.a,{width:80,domain:_?[0,100]:void 0,tickFormatter:h}),Object(A.jsx)(N.a,{cursor:{stroke:Object(f.c)(f.h,10),strokeWidth:1},content:Object(A.jsx)(ie,{isArea:d})}),Object(A.jsx)(F.a,{onClick:e=>{console.log(e.dataKey);const t=o.a.cloneDeep(s),n=o.a.get(t,[a,e.dataKey],!1);o.a.set(t,[a,e.dataKey],!n),i(t)},iconSize:d?8:14,iconType:d&&"circle"}),n.map(((e,n)=>!d&&o.a.some(t,(t=>o.a.get(t,[e+"_bounds"],[]).length))?Object(A.jsx)(U.a,{dataKey:e+"_bounds",hide:o.a.get(s,[a,e],!1),legendType:"none",tooltipType:"none",stroke:Object(f.c)(c[n],f.f-3),fill:Object(f.c)(c[n],f.b-3)},n+"_b"):null)),n.map(((e,t)=>Object(A.jsx)(u,{dataKey:e,name:p(e),hide:o.a.get(s,[a,e],!1),stackId:d?1:t+1e3,stroke:Object(f.c)(c[t],f.f),fill:Object(f.c)(c[t],f.b)},t)))]})})},u=e=>{const{data:t,hideRowNames:a}=e,n=t[0];if(!n)return null;const r=n.values.map((e=>{let{columnName:t,columnNamed:a}=e;return Object(A.jsx)(te.a,{scope:"col",children:a&&t},t)})),_=t.map((e=>{let{rowName:t,values:n}=e;return Object(A.jsxs)(ae.a,{children:[!a&&Object(A.jsx)(te.a,{scope:"row",component:"th",children:t}),n.map((e=>{let{value:t,columnName:a,sheetRow:n,color:r}=e;return Object(A.jsx)(te.a,{sx:{background:r},children:o.a.get(n,l.f.DISPLAY_VALUE,o.a.get([t],0,"N/A"))},a)}))]},t)}));return Object(A.jsx)(R.a,{children:Object(A.jsx)(ne.a,{children:Object(A.jsxs)(re.a,{sx:{"& tbody tr:nth-of-type(odd)":{background:Object(f.c)(f.g,6)},"& td, & thead th":{textAlign:"right"},"& th":{fontWeight:"bold",minWidth:"60px"}},children:[Object(A.jsx)(_e.a,{children:Object(A.jsxs)(ae.a,{children:[!a&&Object(A.jsx)(te.a,{scope:"col"}),r]})}),Object(A.jsx)(ce.a,{children:_})]})})})},h=e=>{const t=Object(Y.a)(),a=Object(oe.a)(t.breakpoints.down("sm")),{data:n,elements:r,colors:_,elementNameMap:c}=(Object(oe.a)(t.breakpoints.up("md")),e),o=r.map((e=>{const t=n[e];return t&&t/100})),s=r.map((e=>({below:c[e].split(l.h)})));return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(Q,{title:"title",bufferRatio:a?.2:.8,lineHeight:a?1.1:1.4,textBufferRatio:.2,firstSide:20,horizontal:!a,ratios:o,fillColors:_.map((e=>Object(f.c)(e,8))),textColors:_.map((e=>Object(f.c)(e,9))),content:s}),Object(A.jsx)("br",{})]})},p=e=>{const a=n.find((e=>e.iso===t));return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(b.a,{variant:"h2",component:"h1",sx:{fontWeight:500,lineHeight:1,fontSize:{lg:"6rem"},maxWidth:{lg:760,xl:"100%"},mb:{sm:1,lg:2}},children:a&&a.name}),Object(A.jsx)(q.a,{sx:{display:{sm:"flex"},"& dl:not(:last-child)":{mr:{sm:4,md:10}},"& dt h2":{fontWeight:100,letterSpacing:".8px",textTransform:"uppercase"},"& dt, dd":{m:0}},children:e.elements.map((t=>Object(A.jsxs)("dl",{children:[Object(A.jsx)("dt",{children:Object(A.jsx)(b.a,{variant:"h6",component:"h2",children:o.a.get(e,["textValues","".concat(t,"_row"),l.f.DISPLAY_NAME],"")})}),Object(A.jsx)("dd",{children:Object(A.jsx)(b.a,{variant:"h4",component:"h2",children:o.a.get(e,["textValues","".concat(t,"_row"),l.f.DISPLAY_VALUE],e.textValues[t])})})]},t)))})]})};return Object(A.jsx)(q.a,{display:"flex",flexWrap:"wrap",pt:8,sx:{justifyContent:{xs:"space-evenly",md:"space-between"}},children:a.map((e=>{if(!e)return null;const{type:a,chartId:_,name:s,hiddenUntilExpand:l}=e;if(l&&!r)return null;if("accordion"===a){const t=e,a=r?"Hide":"Show",n=Object(A.jsx)("b",{children:"\u2191"});return Object(A.jsx)(q.a,{sx:{display:"block",width:"100%",pt:1,pb:2,pl:3,"& button":{p:0,textTransform:"none"},"& b":{px:1,transform:"rotate(".concat(r?"0":"180","deg)"),transition:"transform .2s linear"}},children:Object(A.jsxs)(se.a,{onClick:c,children:[a," ",t.text," ",n]})})}if("link"===a){const a=e,r=n.find((e=>e.iso===t)),_=o.a.get(r,a.elementId);return console.log(e),Object(A.jsx)(q.a,{sx:{display:"block",width:"100%",pt:1,pb:2,pl:3},children:Object(A.jsx)(le.a,{target:"_blank",rel:"noopener noreferrer",href:_,children:a.text})})}return"intro"===_?Object(A.jsx)(q.a,{sx:{flexBasis:{xs:"100%",xl:600},flexGrow:{xl:0},p:3},children:p(e)},_):"table"===a||"table_list"===a?Object(A.jsxs)(q.a,{sx:{flexBasis:"100%",maxWidth:864,p:3},children:[Object(A.jsx)(b.a,{variant:"h5",component:"h3",children:s}),u(e)]},_):"nested"===a?Object(A.jsxs)(A.Fragment,{children:[Object(A.jsxs)(q.a,{sx:{flexBasis:{xs:"100%",xl:700},flexGrow:{xl:1},flexShrink:{xl:1},mr:"auto",ml:{xl:"auto"},maxWidth:864,p:3},children:[Object(A.jsx)(b.a,{pb:3,variant:"h5",component:"h3",children:s}),h(e)]},_),Object(A.jsx)(q.a,{sx:{flexBasis:"100%",height:0}})]}):a&&"line"!==a?(console.warn("Unknown type: ",a),null):Object(A.jsxs)(q.a,{sx:{width:"100%",maxWidth:{md:"44%",xl:"29%"},p:3},children:[Object(A.jsx)(b.a,{variant:"h5",component:"h3",children:s}),d(e)]},_)}))})},ue=e=>{let{homeCopy:t}=e;if(!t||!t.length)return null;const a=Object.keys(t[0]).filter((e=>e.startsWith(l.a.TAP)));return Object(A.jsxs)(M.a,{pt:"72px",px:3,children:[Object(A.jsx)(M.a,{children:t.map(((e,t)=>!!e[l.a.blurb]&&Object(A.jsx)(b.a,{variant:"body1",sx:{fontSize:{sm:"smaller",md:"unset"}},pt:1,dangerouslySetInnerHTML:{__html:Object(ee.d)(e[l.a.blurb])}},t)))}),Object(A.jsxs)(M.a,{py:5,className:"tap-lists-container",children:[Object(A.jsx)(b.a,{variant:"h6",component:"h2",dangerouslySetInnerHTML:{__html:"Technical Assistance Providers"}}),Object(A.jsx)(M.a,{className:"tap-lists",sx:{display:{sm:"flex"}},children:a.map((e=>(e=>Object(A.jsxs)(M.a,{sx:{background:"#f2c2b4",p:1,m:1,borderRadius:"8px",height:"100%"},children:[Object(A.jsx)(b.a,{variant:"body1",sx:{fontSize:{sm:"smaller",md:"unset"}},variant:"h7",component:"h3",dangerouslySetInnerHTML:{__html:e.replace(l.a.TAP,"")}}),Object(A.jsx)("ul",{style:{paddingInlineStart:"20px"},children:t.map(((t,a)=>!!t[e]&&Object(A.jsx)("li",{children:Object(A.jsx)(b.a,{variant:"body1",sx:{fontSize:{sm:"smaller",md:"unset"}},dangerouslySetInnerHTML:{__html:t[e]}},a)},t[e])))})]},e))(e)))})]})]})},he=e=>{let{dictionary:t}=e;const a=Object(j.a)();return Object(A.jsxs)(M.a,{sx:{px:{xs:3,lg:10},mx:{lg:5},mb:{lg:5},py:9,mt:9,background:a.palette.background.paper,"& dl":{display:"inline-block",width:"100%",mt:0,mb:{lg:3},fontSize:15},"& dd":{ml:0,mt:{xs:1},fontSize:13}},children:[Object(A.jsx)(b.a,{variant:"h6",component:"h2",dangerouslySetInnerHTML:{__html:"Glossary"}}),Object(A.jsx)(M.a,{sx:{columnCount:{md:2,xl:3},columnGap:{xs:"2rem",lg:"5rem"},mt:3},children:t.sort(((e,t)=>e.term.toLowerCase()>t.term.toLowerCase())).map((e=>{let{[l.a.term]:t,[l.a.definition]:a}=e;return Object(A.jsxs)("dl",{children:[Object(A.jsx)("dt",{children:Object(A.jsx)("strong",{children:t})}),Object(A.jsx)("dd",{children:Object(A.jsx)(b.a,{dangerouslySetInnerHTML:{__html:Object(ee.d)(a)}})})]},t)}))})]})};function pe(){const[e,t]=_.a.useState(null),[a,n]=_.a.useState([]),[r,c]=_.a.useState([]),[s,l]=_.a.useState([]),[i,d]=_.a.useState([]),[h,p]=_.a.useState([]),[g,O]=_.a.useState(null),[x,M]=_.a.useState(!1);_.a.useEffect((()=>{m().then((e=>{c(e.dictionary.filter((e=>e.term&&e.definition))),l(e.countries.filter((e=>e.iso&&e.name))),d(e.homecopy),p(e.chartIds),O(e.chartConfigsMap)}))}),[]),_.a.useEffect((()=>{e&&async function(e){let{chartConfigsMap:t,chartIds:a,selectedIso:n}=e;return{charts:await u({chartConfigsMap:t,chartIds:a,selectedIso:n}).catch((e=>{console.error("error in getCharts(selectedIso): ",e)}))}}({chartConfigsMap:g,chartIds:h,selectedIso:e}).then((e=>{console.log("@@@ ALL DATA: "),console.log(e.charts),n(e.charts)}))}),[e]);const P=!o.a.some(a,(t=>t&&t.countryIso===e)),D=Object(j.a)();return Object(A.jsxs)(E.a,{elevation:0,sx:{background:Object(f.c)(f.g,3),color:Object(f.c)(f.g,12),fontFamily:D.typography.fontFamily,p:{lg:6}},children:[Object(A.jsx)(w,{countries:s,handleCountryChange:e=>{const a=e.target.value,n=o.a.some(s,(e=>{let{iso:t}=e;return t===a}));t(n?a:null)},selectedIso:e}),Object(A.jsx)("br",{}),e?P?Object(A.jsx)(q.a,{pt:"50vh",children:Object(A.jsx)(b.a,{variant:"body1",sx:{textAlign:"center"},dangerouslySetInnerHTML:{__html:"loading..."}})}):Object(A.jsx)(de,{countries:s,selectedIso:e,chartData:a,dashExpanded:x,toggleDashExpanded:()=>M(!x)}):Object(A.jsx)(ue,{homeCopy:i}),!!r.length&&!P&&x&&Object(A.jsx)(he,{dictionary:r}),false]})}var ge=a(171),Oe=a(443);const me=Object(ge.a)({palette:{primary:{main:Object(f.c)(f.g,11)},secondary:{main:Object(f.c)(f.h,8)}},typography:{fontFamily:["Archivo","sans-serif"].join(",")}});function fe(){return Object(A.jsx)(Oe.a,{theme:me,children:Object(A.jsx)(pe,{})})}const je=document.getElementById("root");Object(n.render)(Object(A.jsx)(fe,{}),je)},39:function(e,t,a){"use strict";a.d(t,"a",(function(){return _})),a.d(t,"c",(function(){return c})),a.d(t,"b",(function(){return o})),a.d(t,"d",(function(){return s}));var n=a(5),r=a.n(n);const _=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=Number(e),t.cap?Math.min(e,Number(t.cap)):e},c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e=Number(e),!isFinite(e))return"NA";if(t.cap&&e>Number(t.cap)){return">".concat(t.cap,"%")}e>100&&console.warn("Incorrect %");const a=t.decimals||0;return r.a.round(e,a).toString()+"%"},o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e=Number(e),t.coarseFormatting){if(e>1e9)return r.a.round(e/1e9,1).toString()+" billion";if(e>1e6)return r.a.round(e/1e6,1).toString()+" million";if(e<100)return"<100";if(e<200)return"<200";if(e<500)return"<500";if(e<1e3)return"<1000";e=Number(e.toPrecision(2))}return e.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1 ")},s=e=>e.replaceAll("<a ","<a target='_blank' rel='noopener noreferrer'")},4:function(e,t,a){"use strict";a.d(t,"i",(function(){return n})),a.d(t,"k",(function(){return r})),a.d(t,"h",(function(){return _})),a.d(t,"b",(function(){return c})),a.d(t,"c",(function(){return o})),a.d(t,"g",(function(){return s})),a.d(t,"d",(function(){return l})),a.d(t,"e",(function(){return i})),a.d(t,"j",(function(){return d})),a.d(t,"a",(function(){return u})),a.d(t,"f",(function(){return h}));const n=!0,r="__",_="__",c=["dictionary","countries","homecopy"],o=["configs",...c],s={home:"0"},l={chartId:"chart_id",sourceGid:"source_gid",element:"element",displayName:"display_name",hiddenUntilExpand:"hidden_until_expand",capPercentage:"cap_percentage",percentageDecimals:"percentage_decimals",coarseIntegerFormatting:"coarse_integer_formatting",colorOverride:"color_override",chartType:"chart_type",modelled:"modelled",formula:"formula",hidden:"hidden",valueField:"value_field",percentage:"percentage"},i={country_iso_code:"country_iso_code",sourceYear:"source_year",value:"value",year:"year",indicator:"indicator",indicator_description:"indicator_description",sex:"sex",age:"age",population_segment:"population_segment",population_sub_group:"population_sub_group",country_name:"country_name",area_name:"area_name",geographic_scope:"geographic_scope",value_upper:"value_upper",value_lower:"value_lower",value_comment:"value_comment",unit_format:"unit_format",source_organization:"source_organization",source_database:"source_database",source_display:"source_display",notes:"notes",modality:"modality",modality_category:"modality_category",import_file:"import_file",import_timestamp:"import_timestamp",row_id:"row_id",suppressed:"suppressed",Deliverable:"Deliverable",Supplier:"Supplier",REGEX:{quarter:/Q\d\s\d{4}/}},d={all:"all",_page_element_:"_page_element_",_key_:"_key_",_color_by_:"_color_by_",link_url:"link_url"},u={term:"term",definition:"definition",iso:"iso",name:"name",blurb:"blurb",TAP:"_TAP_"},h={DISPLAY_NAME:"DISPLAY_NAME",DISPLAY_VALUE:"DISPLAY_VALUE",DISPLAY_VALUE_LOWER:"DISPLAY_".concat(i.value_lower.toUpperCase()),DISPLAY_VALUE_UPPER:"DISPLAY_".concat(i.value_upper.toUpperCase())}}},[[382,1,2]]]);
//# sourceMappingURL=main.33ff1708.chunk.js.map